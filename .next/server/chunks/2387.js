"use strict";exports.id=2387,exports.ids=[2387],exports.modules={2368:(e,t,n)=>{n.a(e,async(e,s)=>{try{n.d(t,{Z:()=>O});var a=n(20997),r=n(16689),l=n(32245),i=n.n(l),d=n(65481),o=n.n(d),c=n(17373),h=n.n(c),u=n(7988),x=n.n(u),j=n(86096),p=n.n(j),m=n(52815),g=n.n(m),f=n(78316),b=n.n(f),y=n(11256),v=n.n(y),C=n(66964),S=n.n(C),k=n(98125),w=n.n(k),Z=n(52032),M=n.n(Z),T=n(15392),I=n.n(T),P=n(40788),G=n.n(P),A=n(73572),D=n.n(A),E=n(37277),Y=n.n(E),F=n(62553),R=n(6959),q=n.n(R),$=e([F]);F=($.then?(await $)():$)[0];let O=({jobId:e,candidateId:t,updateHash:n,renderItem:s})=>{let[l,d]=(0,r.useState)(!1),[c,u]=(0,r.useState)([]),[j,m]=(0,r.useState)(""),f=()=>{d(!0),(0,F.Gy)({path:`/${e?"jobs":"candidates"}/get-activity-logs?jobId=${e}&candidateId=${t}`,method:"GET"}).then(e=>{d(!1),e.error||u(e)})};return(0,r.useEffect)(()=>{f()},[e,t,n]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(h(),{container:!0,justifyContent:"space-between",children:[a.jsx(h(),{item:!0,flex:1,sx:{marginRight:"10px"},children:a.jsx(x(),{placeholder:"Add a quick note.",fullWidth:!0,multiline:!0,minRows:1,value:j,onChange:e=>m(e.target.value),sx:{"& .MuiInputBase-root":{padding:"8px 10px"}}})}),a.jsx(h(),{item:!0,children:a.jsx(p(),{disabled:""===j,onClick:()=>{(0,F.Gy)({path:"/activity-logs/create-note",method:"POST",data:{jobId:e,candidateId:t,note:j}}).then(e=>{e.error||(m(""),f())})},variant:"contained",color:"success",children:a.jsx(q(),{})})})]}),a.jsx(S(),{sx:{[`& .${A.timelineOppositeContentClasses.root}`]:{flex:.2}},children:c.map((e,t)=>(0,a.jsxs)(w(),{children:[a.jsx(D(),{sx:{m:"auto 0"},variant:"body2",color:"text.secondary",children:i()(e.createdAt).format("YYYY/MM/DD")}),(0,a.jsxs)(M(),{children:[a.jsx(I(),{}),a.jsx(Y(),{children:e.user&&e.user.avatarUrl?a.jsx(g(),{title:`${e.user.firstName} ${e.user.lastName}`,children:a.jsx(b(),{src:(0,F.pJ)(e.user.avatarUrl),sx:{width:"30px",height:"30px"}})}):a.jsx(o(),{})}),a.jsx(I(),{})]}),(0,a.jsxs)(G(),{children:[a.jsx("br",{}),s(e)]})]},t))}),l?a.jsx(v(),{}):null]})};s()}catch(e){s(e)}})},15686:(e,t,n)=>{n.a(e,async(e,s)=>{try{n.d(t,{Z:()=>K});var a=n(20997),r=n(16689),l=n(32245),i=n.n(l),d=n(62553),o=n(53456),c=n.n(o),h=n(17155),u=n.n(h),x=n(45845),j=n.n(x),p=n(7988),m=n.n(p),g=n(86096),f=n.n(g),b=n(17373),y=n.n(b),v=n(86024),C=n.n(v),S=n(46537),k=n.n(S),w=n(33500),Z=n.n(w),M=n(25836),T=n.n(M),I=n(53037),P=n.n(I),G=n(5399),A=n.n(G),D=n(77557),E=n.n(D),Y=n(9285),F=n.n(Y),R=n(11256),q=n.n(R),$=n(4173),O=n.n($),N=n(97885),_=n(40063),L=n(69708),z=n(87478),H=n(26802),J=n(87535),B=n(94296),W=n(56344),U=n(57194),V=e([d,H,J,B,W]);[d,H,J,B,W]=V.then?(await V)():V;let K=({jobId:e,candidateId:t,to:n})=>{let[s,l]=(0,r.useState)(null),[o,h]=(0,r.useState)(!1),[x,p]=(0,r.useState)(!1),[g,b]=(0,r.useState)(""),[v,S]=(0,r.useState)(""),[w,M]=(0,r.useState)([]),[I,G]=(0,r.useState)(""),[D,Y]=(0,r.useState)(""),[R,$]=(0,r.useState)(!1),[V,K]=(0,r.useState)(!1),[Q,X]=(0,r.useState)(""),[ee,et]=(0,r.useState)([]),[en,es]=(0,r.useState)(Math.random()),ea=(0,r.useRef)(null),er=()=>{h(!0),(0,d.Gy)({path:`/jobs/detail?_id=${e}`,method:"get"}).then(e=>{h(!1),e.error||(l(e),b(e._id))})},el=()=>{(0,d.Gy)({path:"/email-templates/list",method:"get"}).then(e=>{e.error||et(e.list)}).catch(e=>{(0,L.Z)(e.message),et([])})};(0,r.useEffect)(()=>{e&&er()},[e]),(0,r.useEffect)(()=>{S(n||"")},[n]);let ei=()=>{if(!Q){(0,L.Z)("Please fill the required fields");return}(0,d.Gy)({path:"/email-templates/manage",method:"POST",data:{name:Q,regardingJobId:g,receipients:v,subject:I,body:D,attachments:w}}).then(e=>{e.error||((0,L.Z)("Success"),$(!1))}).catch(e=>{(0,L.Z)(e.message)})},ed=e=>{(0,d.Gy)({path:"/email-templates/manage",method:"POST",data:{action:"remove",_id:e}}).then(e=>{e.error||el()})},eo=()=>{if(!v||!I||!D){(0,L.Z)("Please fill the required fields");return}p(!0),(0,d.Gy)({path:"/emails/send",method:"POST",data:{candidateId:t,regardingJobId:g,receipients:v,subject:I,body:D,attachments:w}}).then(e=>{p(!1),e.error||(0,L.Z)("Success")}).catch(e=>{p(!1),(0,L.Z)(e.message)})},ec=e=>{M(w.filter(t=>t.url!==e.url))},eh=e=>{M([...w,...e])},eu=e=>{es(Math.random()),b(e.regardingJobId),S(e.receipients),G(e.subject),Y(e.body),M(e.attachments),K(!1)};return o?a.jsx(q(),{}):(0,a.jsxs)(a.Fragment,{children:[R?(0,a.jsxs)(c(),{open:R,onClose:()=>$(!1),fullScreen:!0,sx:{width:"50%",left:"inherit"},children:[a.jsx(u(),{children:"Save as template"}),(0,a.jsxs)(j(),{children:[a.jsx("br",{}),(0,_.fM)({label:"Template name",required:!0,renderControl:()=>a.jsx(m(),{value:Q,onChange:e=>X(e.target.value),fullWidth:!0})}),a.jsx(f(),{onClick:()=>{$(!1)},color:"inherit",variant:"contained",children:"Cancel"})," ",a.jsx(f(),{onClick:()=>{ei()},color:"success",variant:"contained",children:"Save"})]})]}):null,V?(0,a.jsxs)(c(),{open:V,onClose:()=>K(!1),fullScreen:!0,sx:{width:"50%",left:"inherit"},children:[a.jsx(u(),{children:(0,a.jsxs)(y(),{container:!0,justifyContent:"space-between",alignItems:"center",children:[a.jsx(y(),{item:!0,children:"Load Template"}),a.jsx(y(),{item:!0,children:a.jsx(C(),{onClick:()=>K(!1),children:a.jsx(O(),{})})})]})}),(0,a.jsxs)(j(),{children:[a.jsx(k(),{children:(0,a.jsxs)(Z(),{children:[a.jsx(T(),{children:(0,a.jsxs)(P(),{children:[a.jsx(A(),{children:"Name"}),a.jsx(A(),{children:"Created at"}),a.jsx(A(),{children:"Modified at"}),a.jsx(A(),{})]})}),a.jsx(E(),{children:ee.map(e=>(0,a.jsxs)(P(),{children:[a.jsx(A(),{children:a.jsx("a",{href:"#",onClick:()=>eu(e),children:e.name})}),a.jsx(A(),{children:i()(e.createdAt).format("DD/MM/YYYY HH:mm")}),a.jsx(A(),{children:e.updatedAt?i()(e.updatedAt).format("DD/MM/YYYY HH:mm"):i()(e.createdAt).format("DD/MM/YYYY HH:mm")}),a.jsx(A(),{children:a.jsx(f(),{size:"small",color:"error",variant:"contained",onClick:()=>{(0,U.Z)({title:"Are you sure you want to delete this template?",message:"This action cannot be undone.",onAnswer:t=>{t&&ed(e._id)}})},children:"Remove"})})]}))})]})}),0===ee.length?a.jsx(F(),{sx:{textAlign:"center",marginTop:"20px"},children:"No templates found"}):null]})]}):null,(0,a.jsxs)(y(),{container:!0,justifyContent:"space-between",alignItems:"center",children:[a.jsx(y(),{item:!0}),(0,a.jsxs)(y(),{item:!0,children:[a.jsx(f(),{size:"small",onClick:()=>{K(!0),el()},variant:"contained",children:"Load template"}),"  ",a.jsx(f(),{size:"small",onClick:()=>{$(!0),X("")},variant:"contained",children:"Save as template"}),"  ",a.jsx(f(),{size:"small",color:"success",onClick:()=>{eo()},disabled:x,variant:"contained",children:x?"Sending...":"Send"})]})]}),a.jsx("br",{}),(0,a.jsxs)(N.DragDropContext,{onDragEnd:e=>{(0,W.bq)(e,ea)},children:[(0,_.fM)({label:"Regarding",renderControl:()=>a.jsx(H.Z,{defaultValue:s,onSelect:e=>{b(e?e._id:"")}},en)}),(0,_.fM)({label:"To (BCC)",required:!0,renderControl:()=>a.jsx(m(),{value:v,onChange:e=>S(e.target.value),fullWidth:!0})}),(0,_.fM)({label:"Subject",required:!0,renderControl:()=>a.jsx(m(),{value:I,onChange:e=>G(e.target.value),fullWidth:!0})}),(0,_.fM)({label:"Body",required:!0,renderControl:()=>(0,a.jsxs)(a.Fragment,{children:[(0,W.Fv)("initial",()=>(0,a.jsxs)("div",{style:{width:"28%",float:"right",marginTop:"-20px",fontSize:"12px"},children:[a.jsx("h3",{children:"Tags"}),a.jsx("div",{style:{height:"400px",overflow:"scroll"},children:a.jsx(W.ZP,{})})]})),(0,a.jsxs)("div",{style:{width:"70%",float:"left"},children:[(0,W.Fv)("droppable-editor",e=>a.jsx(z.Z,{style:{height:"300px",...(0,W.JU)(e)},value:D,onChange:e=>Y(e),renderExtraContent:e=>(ea=e,null)})),a.jsx("br",{}),a.jsx("br",{}),a.jsx("br",{}),a.jsx("br",{}),a.jsx(J.Z,{title:"",files:w,onDelete:e=>{ec(e)},rightSide:a.jsx(a.Fragment,{children:a.jsx(B.Z,{label:"Add atachment",showList:!1,onChange:e=>{eh(e)}})})})]})]})})]})]})};s()}catch(e){s(e)}})},58070:(e,t,n)=>{n.a(e,async(e,s)=>{try{n.d(t,{Z:()=>A});var a=n(20997),r=n(16689),l=n(85246),i=n.n(l),d=n(53456),o=n.n(d),c=n(17155),h=n.n(c),u=n(9285),x=n.n(u),j=n(86024),p=n.n(j),m=n(86096),g=n.n(m),f=n(45845),b=n.n(f),y=n(7988),v=n.n(y),C=n(29972),S=n.n(C),k=n(4173),w=n.n(k),Z=n(93790),M=n.n(Z),T=n(40063),I=n(62553),P=n(69708),G=e([I]);I=(G.then?(await G)():G)[0];let A=({candidateId:e,jobId:t,onSuccess:n,status:s})=>{let[l,d]=(0,r.useState)(!1),[c,u]=(0,r.useState)(!1),[j,m]=(0,r.useState)(""),[f,y]=(0,r.useState)(""),[C,k]=(0,r.useState)([]),Z=async()=>{(0,I.Gy)({path:"/candidates/statuses",method:"GET"}).then(e=>{d(!1),e.error||k(e.list)}).catch(e=>{(0,P.Z)(e.message)})},G=async()=>{d(!0);try{await (0,I.Gy)({path:"/candidates/change-job-order-status",method:"POST",data:{candidateId:e,jobId:t,statusId:j,note:f}}),u(!1),n(),d(!1)}catch(e){d(!1),(0,P.Z)(e)}};(0,r.useEffect)(()=>{d(!0),Z()},[]);let A=()=>{u(!1)},D={cursor:"pointer"},E=()=>u(!0);return(0,a.jsxs)(a.Fragment,{children:[c?(0,a.jsxs)(o(),{onClose:A,"aria-labelledby":"modal-title",open:!0,fullScreen:!0,style:{width:"40%",left:"inherit"},children:[a.jsx(h(),{id:"modal-title",children:(0,a.jsxs)(x(),{display:"flex",alignItems:"center",children:[a.jsx(x(),{flexGrow:1,children:"Change status"}),(0,a.jsxs)(x(),{children:[a.jsx(p(),{onClick:A,children:a.jsx(w(),{})}),a.jsx(g(),{variant:"contained",color:"success",onClick:G,disabled:l,children:l?"Saving...":"Save"})]})]})}),(0,a.jsxs)(b(),{style:{backgroundColor:"#f8f8f8"},children:[a.jsx("br",{}),a.jsx("br",{}),(0,T.fM)({label:"Notes",renderControl:()=>a.jsx(v(),{multiline:!0,minRows:5,fullWidth:!0,value:f,onChange:e=>y(e.target.value)})}),(0,T.fM)({label:"Status",renderControl:()=>{if(j){let e=C.find(e=>e._id===j);return(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,a.jsxs)("div",{className:"candidate-status-choices",children:[a.jsx("div",{className:"circle",style:{backgroundColor:e.color}}),e.name]}),a.jsx("div",{style:{marginLeft:"10px",cursor:"pointer",backgroundColor:"#dfdfdf",padding:"4px 8px",paddingBottom:"0px",borderRadius:"15px"},onClick:()=>{m(null)},children:a.jsx(M(),{})})]})}return(0,a.jsxs)(a.Fragment,{children:[C.map(e=>(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"candidate-status-choices",onClick:()=>m(e._id),children:[a.jsx("div",{className:"circle",style:{backgroundColor:e.color}}),a.jsx("span",{children:e.name})]},e._id),a.jsx("br",{})]})),0===C.length&&a.jsx(x(),{sx:{textAlign:"center"},children:(0,a.jsxs)("p",{children:["No statuses. Please create a status in ",a.jsx(i(),{target:"_blank",href:"/settings/candidate-status",children:"Settings"})]})})]})}})]})]}):null,s&&s.name?a.jsx(S(),{style:{backgroundColor:s.color,color:"white"},label:s.name,sx:D,onClick:E}):a.jsx(S(),{label:"Change status",sx:D,onClick:E})]})};s()}catch(e){s(e)}})},56344:(e,t,n)=>{n.a(e,async(e,s)=>{try{n.d(t,{Fv:()=>c,JU:()=>o,ZP:()=>u,bq:()=>h});var a=n(20997),r=n(16689),l=n(97885),i=n(62553),d=e([i]);i=(d.then?(await d)():d)[0];let o=e=>({backgroundColor:e.isDraggingOver?"#ffffff":"inherit"}),c=(e,t)=>a.jsx(l.Droppable,{droppableId:e,children:(e,n)=>(0,a.jsxs)("div",{ref:e.innerRef,...e.droppableProps,children:[t(n),e.placeholder]})}),h=(e,t)=>{let n=e.destination,{draggableId:s}=e;if(n){let{droppableId:e}=n;if("droppable-editor"===e&&t&&t.current){let e=t.current.getEditor(),n=e.getSelection(),a=e.getLength();n&&(a=e.getSelection().index),e.insertText(a,s)}}},u=()=>{let[e,t]=(0,r.useState)([]);(0,r.useEffect)(()=>{(0,i.Gy)({path:"/candidates/statuses/tags",method:"GET"}).then(e=>{t(e.tags)})},[]);let n=()=>a.jsx(a.Fragment,{children:e.map((e,t)=>a.jsx(l.Draggable,{draggableId:e.value,index:t,children:t=>a.jsx("div",{ref:t.innerRef,...t.draggableProps,...t.dragHandleProps,children:a.jsx("div",{style:{backgroundColor:"#f8f8f8",padding:"5px",borderBottom:"1px solid #e0e0e0",cursor:"grab"},children:e.text})})}))});return a.jsx(a.Fragment,{children:c("initial",()=>a.jsx(a.Fragment,{children:n()}))})};s()}catch(e){s(e)}})},26802:(e,t,n)=>{n.a(e,async(e,s)=>{try{n.d(t,{Z:()=>b});var a=n(20997),r=n(16689),l=n.n(r),i=n(7988),d=n.n(i),o=n(62553),c=n(55043),h=n.n(c),u=n(93674),x=n.n(u),j=n(57077),p=n(69708),m=e([o]);o=(m.then?(await m)():m)[0];let g={current:null},f=e=>(0,o.Gy)({path:`/jobs/get-list?search=${e}`,method:"get"}),b=function({onSelect:e,disabled:t=!1,label:n="Job search ...",defaultValue:s,textFieldStyle:r,inputPropStyle:i}){let[o,c]=l().useState(!1),[u,m]=l().useState(s),[b,y]=l().useState(""),[v,C]=l().useState([]),S=l().useMemo(()=>(0,j.debounce)((e,t)=>{c(!0),g.current.getJobsApiMethod(e.input).then(e=>{c(!1),t(e.list)}).catch(e=>{(0,p.Z)(e.message),c(!1),t([])})},400),[]),k=e=>{let t=[];u&&(t=[u]),e&&(t=[...t,...e]),C(t)};return l().useEffect(()=>{let e=!0;if(g.current||(g.current={getJobsApiMethod:f}),""===b){C(u?[u]:[]);return}return S({input:b},t=>{e&&k(t)}),()=>{e=!1}},[u,b,S]),a.jsx(h(),{isOptionEqualToValue:(e,t)=>e.title===t.title,getOptionLabel:e=>e.title,options:v,autoComplete:!0,disabled:t,includeInputInList:!0,filterSelectedOptions:!0,value:u,noOptionsText:"Type a job title ...",onChange:(t,n)=>{C(n?[n,...v]:v),m(n),e(n)},onInputChange:(e,t)=>{y(t)},renderInput:e=>a.jsx(d(),{id:"job-auto-complete",sx:r,...e,label:n,InputLabelProps:{style:{top:"-10px"}},InputProps:{...e.InputProps,endAdornment:(0,a.jsxs)(l().Fragment,{children:[o?a.jsx(x(),{color:"inherit",size:20}):null,e.InputProps.endAdornment]}),style:i}})})};s()}catch(e){s(e)}})},77419:(e,t,n)=>{n.d(t,{Z:()=>j});var s=n(20997),a=n(16689),r=n(11163),l=n(7988),i=n.n(l),d=n(35142),o=n.n(d),c=n(38017),h=n.n(c),u=n(51653),x=n.n(u);let j=({onChange:e})=>{let t=(0,r.useRouter)(),{search:n}=t.query,[l,d]=(0,a.useState)(n),[c,u]=(0,a.useState)(n?"flex":"none");return s.jsx(i(),{size:"small",variant:"outlined",onChange:e=>{d(e.target.value)},value:l,onKeyDown:n=>{if("Enter"===n.key){let s=n.target.value;u(""===s?"none":"flex"),e?e(s):t.push(`?search=${s}`)}},style:{width:"350px",marginRight:"5px"},placeholder:"Search ...",InputProps:{startAdornment:s.jsx(o(),{position:"start",children:s.jsx(h(),{})}),endAdornment:s.jsx(o(),{position:"end",style:{display:c},children:s.jsx(x(),{onClick:()=>{d(""),u("none"),t.push("?search=")},sx:{cursor:"pointer"}})})}})}},5921:(e,t,n)=>{n.a(e,async(e,s)=>{try{n.d(t,{Z:()=>d});var a=n(16689),r=n(11163),l=n(62553),i=e([l]);l=(i.then?(await i)():i)[0];let d=({endpoint:e,page:t,extraParams:n,useEffectParams:s})=>{let i=(0,r.useRouter)(),d=t||i.query.page||1,[o,c]=(0,a.useState)(!1),[h,u]=(0,a.useState)([]),[x,j]=(0,a.useState)(0),p=async()=>{(0,l.Gy)({path:`/${e}?page=${d}${n}`,method:"GET"}).then(e=>{c(!1),e.error||(j(e.totalCount),u(e.list))})};return(0,a.useEffect)(()=>{i.isReady&&(c(!0),p())},[d,i.isReady,...s||[]]),{page:d,fetchList:p,isLoading:o,list:h,totalCount:x,setList:u,setTotalCount:j}};s()}catch(e){s(e)}})}};