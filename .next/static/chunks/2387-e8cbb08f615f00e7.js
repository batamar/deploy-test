"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2387],{2368:function(e,t,n){var s=n(85893),r=n(67294),a=n(30381),l=n.n(a),i=n(71233),o=n(86886),d=n(61903),c=n(69417),u=n(34386),h=n(69661),x=n(81458),j=n(36599),p=n(36270),m=n(9601),g=n(51221),f=n(72162),Z=n(87848),b=n(54123),v=n(17494),S=n(82414),C=n(27036);t.Z=e=>{let{jobId:t,candidateId:n,updateHash:a,renderItem:y}=e,[k,P]=(0,r.useState)(!1),[w,M]=(0,r.useState)([]),[T,I]=(0,r.useState)(""),E=()=>{P(!0),(0,S.Gy)({path:"/".concat(t?"jobs":"candidates","/get-activity-logs?jobId=").concat(t,"&candidateId=").concat(n),method:"GET"}).then(e=>{P(!1),e.error||M(e)})};return(0,r.useEffect)(()=>{E()},[t,n,a]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(o.ZP,{container:!0,justifyContent:"space-between",children:[(0,s.jsx)(o.ZP,{item:!0,flex:1,sx:{marginRight:"10px"},children:(0,s.jsx)(d.Z,{placeholder:"Add a quick note.",fullWidth:!0,multiline:!0,minRows:1,value:T,onChange:e=>I(e.target.value),sx:{"& .MuiInputBase-root":{padding:"8px 10px"}}})}),(0,s.jsx)(o.ZP,{item:!0,children:(0,s.jsx)(c.Z,{disabled:""===T,onClick:()=>{(0,S.Gy)({path:"/activity-logs/create-note",method:"POST",data:{jobId:t,candidateId:n,note:T}}).then(e=>{e.error||(I(""),E())})},variant:"contained",color:"success",children:(0,s.jsx)(C.Z,{})})})]}),(0,s.jsx)(j.Z,{sx:{["& .".concat(Z.Z.root)]:{flex:.2}},children:w.map((e,t)=>(0,s.jsxs)(p.Z,{children:[(0,s.jsx)(b.Z,{sx:{m:"auto 0"},variant:"body2",color:"text.secondary",children:l()(e.createdAt).format("YYYY/MM/DD")}),(0,s.jsxs)(m.Z,{children:[(0,s.jsx)(g.Z,{}),(0,s.jsx)(v.Z,{children:e.user&&e.user.avatarUrl?(0,s.jsx)(u.Z,{title:"".concat(e.user.firstName," ").concat(e.user.lastName),children:(0,s.jsx)(h.Z,{src:(0,S.pJ)(e.user.avatarUrl),sx:{width:"30px",height:"30px"}})}):(0,s.jsx)(i.Z,{})}),(0,s.jsx)(g.Z,{})]}),(0,s.jsxs)(f.Z,{children:[(0,s.jsx)("br",{}),y(e)]})]},t))}),k?(0,s.jsx)(x.Z,{}):null]})}},66968:function(e,t,n){var s=n(85893),r=n(67294),a=n(30381),l=n.n(a),i=n(82414),o=n(50657),d=n(37645),c=n(6514),u=n(61903),h=n(69417),x=n(86886),j=n(93946),p=n(72882),m=n(7906),g=n(53184),f=n(53816),Z=n(53252),b=n(295),v=n(5616),S=n(81458),C=n(50594),y=n(28627),k=n(40063),P=n(69708),w=n(87478),M=n(26802),T=n(87535),I=n(94296),E=n(56344),G=n(57194);t.Z=e=>{let{jobId:t,candidateId:n,to:a}=e,[A,Y]=(0,r.useState)(null),[F,R]=(0,r.useState)(!1),[_,q]=(0,r.useState)(!1),[D,N]=(0,r.useState)(""),[O,L]=(0,r.useState)(""),[z,H]=(0,r.useState)([]),[J,B]=(0,r.useState)(""),[W,U]=(0,r.useState)(""),[K,V]=(0,r.useState)(!1),[Q,X]=(0,r.useState)(!1),[$,ee]=(0,r.useState)(""),[et,en]=(0,r.useState)([]),[es,er]=(0,r.useState)(Math.random()),ea=(0,r.useRef)(null),el=()=>{R(!0),(0,i.Gy)({path:"/jobs/detail?_id=".concat(t),method:"get"}).then(e=>{R(!1),e.error||(Y(e),N(e._id))})},ei=()=>{(0,i.Gy)({path:"/email-templates/list",method:"get"}).then(e=>{e.error||en(e.list)}).catch(e=>{(0,P.Z)(e.message),en([])})};(0,r.useEffect)(()=>{t&&el()},[t]),(0,r.useEffect)(()=>{L(a||"")},[a]);let eo=()=>{if(!$){(0,P.Z)("Please fill the required fields");return}(0,i.Gy)({path:"/email-templates/manage",method:"POST",data:{name:$,regardingJobId:D,receipients:O,subject:J,body:W,attachments:z}}).then(e=>{e.error||((0,P.Z)("Success"),V(!1))}).catch(e=>{(0,P.Z)(e.message)})},ed=e=>{(0,i.Gy)({path:"/email-templates/manage",method:"POST",data:{action:"remove",_id:e}}).then(e=>{e.error||ei()})},ec=()=>{if(!O||!J||!W){(0,P.Z)("Please fill the required fields");return}q(!0),(0,i.Gy)({path:"/emails/send",method:"POST",data:{candidateId:n,regardingJobId:D,receipients:O,subject:J,body:W,attachments:z}}).then(e=>{q(!1),e.error||(0,P.Z)("Success")}).catch(e=>{q(!1),(0,P.Z)(e.message)})},eu=e=>{H(z.filter(t=>t.url!==e.url))},eh=e=>{H([...z,...e])},ex=e=>{er(Math.random()),N(e.regardingJobId),L(e.receipients),B(e.subject),U(e.body),H(e.attachments),X(!1)};return F?(0,s.jsx)(S.Z,{}):(0,s.jsxs)(s.Fragment,{children:[K?(0,s.jsxs)(o.Z,{open:K,onClose:()=>V(!1),fullScreen:!0,sx:{width:"50%",left:"inherit"},children:[(0,s.jsx)(d.Z,{children:"Save as template"}),(0,s.jsxs)(c.Z,{children:[(0,s.jsx)("br",{}),(0,k.fM)({label:"Template name",required:!0,renderControl:()=>(0,s.jsx)(u.Z,{value:$,onChange:e=>ee(e.target.value),fullWidth:!0})}),(0,s.jsx)(h.Z,{onClick:()=>{V(!1)},color:"inherit",variant:"contained",children:"Cancel"})," ",(0,s.jsx)(h.Z,{onClick:()=>{eo()},color:"success",variant:"contained",children:"Save"})]})]}):null,Q?(0,s.jsxs)(o.Z,{open:Q,onClose:()=>X(!1),fullScreen:!0,sx:{width:"50%",left:"inherit"},children:[(0,s.jsx)(d.Z,{children:(0,s.jsxs)(x.ZP,{container:!0,justifyContent:"space-between",alignItems:"center",children:[(0,s.jsx)(x.ZP,{item:!0,children:"Load Template"}),(0,s.jsx)(x.ZP,{item:!0,children:(0,s.jsx)(j.Z,{onClick:()=>X(!1),children:(0,s.jsx)(C.Z,{})})})]})}),(0,s.jsxs)(c.Z,{children:[(0,s.jsx)(p.Z,{children:(0,s.jsxs)(m.Z,{children:[(0,s.jsx)(g.Z,{children:(0,s.jsxs)(f.Z,{children:[(0,s.jsx)(Z.Z,{children:"Name"}),(0,s.jsx)(Z.Z,{children:"Created at"}),(0,s.jsx)(Z.Z,{children:"Modified at"}),(0,s.jsx)(Z.Z,{})]})}),(0,s.jsx)(b.Z,{children:et.map(e=>(0,s.jsxs)(f.Z,{children:[(0,s.jsx)(Z.Z,{children:(0,s.jsx)("a",{href:"#",onClick:()=>ex(e),children:e.name})}),(0,s.jsx)(Z.Z,{children:l()(e.createdAt).format("DD/MM/YYYY HH:mm")}),(0,s.jsx)(Z.Z,{children:e.updatedAt?l()(e.updatedAt).format("DD/MM/YYYY HH:mm"):l()(e.createdAt).format("DD/MM/YYYY HH:mm")}),(0,s.jsx)(Z.Z,{children:(0,s.jsx)(h.Z,{size:"small",color:"error",variant:"contained",onClick:()=>{(0,G.Z)({title:"Are you sure you want to delete this template?",message:"This action cannot be undone.",onAnswer:t=>{t&&ed(e._id)}})},children:"Remove"})})]}))})]})}),0===et.length?(0,s.jsx)(v.Z,{sx:{textAlign:"center",marginTop:"20px"},children:"No templates found"}):null]})]}):null,(0,s.jsxs)(x.ZP,{container:!0,justifyContent:"space-between",alignItems:"center",children:[(0,s.jsx)(x.ZP,{item:!0}),(0,s.jsxs)(x.ZP,{item:!0,children:[(0,s.jsx)(h.Z,{size:"small",onClick:()=>{X(!0),ei()},variant:"contained",children:"Load template"}),"  ",(0,s.jsx)(h.Z,{size:"small",onClick:()=>{V(!0),ee("")},variant:"contained",children:"Save as template"}),"  ",(0,s.jsx)(h.Z,{size:"small",color:"success",onClick:()=>{ec()},disabled:_,variant:"contained",children:_?"Sending...":"Send"})]})]}),(0,s.jsx)("br",{}),(0,s.jsxs)(y.Z5,{onDragEnd:e=>{(0,E.bq)(e,ea)},children:[(0,k.fM)({label:"Regarding",renderControl:()=>(0,s.jsx)(M.Z,{defaultValue:A,onSelect:e=>{N(e?e._id:"")}},es)}),(0,k.fM)({label:"To (BCC)",required:!0,renderControl:()=>(0,s.jsx)(u.Z,{value:O,onChange:e=>L(e.target.value),fullWidth:!0})}),(0,k.fM)({label:"Subject",required:!0,renderControl:()=>(0,s.jsx)(u.Z,{value:J,onChange:e=>B(e.target.value),fullWidth:!0})}),(0,k.fM)({label:"Body",required:!0,renderControl:()=>(0,s.jsxs)(s.Fragment,{children:[(0,E.Fv)("initial",()=>(0,s.jsxs)("div",{style:{width:"28%",float:"right",marginTop:"-20px",fontSize:"12px"},children:[(0,s.jsx)("h3",{children:"Tags"}),(0,s.jsx)("div",{style:{height:"400px",overflow:"scroll"},children:(0,s.jsx)(E.ZP,{})})]})),(0,s.jsxs)("div",{style:{width:"70%",float:"left"},children:[(0,E.Fv)("droppable-editor",e=>(0,s.jsx)(w.Z,{style:{height:"300px",...(0,E.JU)(e)},value:W,onChange:e=>U(e),renderExtraContent:e=>(ea=e,null)})),(0,s.jsx)("br",{}),(0,s.jsx)("br",{}),(0,s.jsx)("br",{}),(0,s.jsx)("br",{}),(0,s.jsx)(T.Z,{title:"",files:z,onDelete:e=>{eu(e)},rightSide:(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(I.Z,{label:"Add atachment",showList:!1,onChange:e=>{eh(e)}})})})]})]})})]})]})}},58070:function(e,t,n){var s=n(85893),r=n(67294),a=n(23795),l=n(50657),i=n(37645),o=n(5616),d=n(93946),c=n(69417),u=n(6514),h=n(61903),x=n(87918),j=n(50594),p=n(26130),m=n(40063),g=n(82414),f=n(69708);t.Z=e=>{let{candidateId:t,jobId:n,onSuccess:Z,status:b}=e,[v,S]=(0,r.useState)(!1),[C,y]=(0,r.useState)(!1),[k,P]=(0,r.useState)(""),[w,M]=(0,r.useState)(""),[T,I]=(0,r.useState)([]),E=async()=>{(0,g.Gy)({path:"/candidates/statuses",method:"GET"}).then(e=>{S(!1),e.error||I(e.list)}).catch(e=>{(0,f.Z)(e.message)})},G=async()=>{S(!0);try{await (0,g.Gy)({path:"/candidates/change-job-order-status",method:"POST",data:{candidateId:t,jobId:n,statusId:k,note:w}}),y(!1),Z(),S(!1)}catch(e){S(!1),(0,f.Z)(e)}};(0,r.useEffect)(()=>{S(!0),E()},[]);let A=()=>{y(!1)},Y={cursor:"pointer"},F=()=>y(!0);return(0,s.jsxs)(s.Fragment,{children:[C?(0,s.jsxs)(l.Z,{onClose:A,"aria-labelledby":"modal-title",open:!0,fullScreen:!0,style:{width:"40%",left:"inherit"},children:[(0,s.jsx)(i.Z,{id:"modal-title",children:(0,s.jsxs)(o.Z,{display:"flex",alignItems:"center",children:[(0,s.jsx)(o.Z,{flexGrow:1,children:"Change status"}),(0,s.jsxs)(o.Z,{children:[(0,s.jsx)(d.Z,{onClick:A,children:(0,s.jsx)(j.Z,{})}),(0,s.jsx)(c.Z,{variant:"contained",color:"success",onClick:G,disabled:v,children:v?"Saving...":"Save"})]})]})}),(0,s.jsxs)(u.Z,{style:{backgroundColor:"#f8f8f8"},children:[(0,s.jsx)("br",{}),(0,s.jsx)("br",{}),(0,m.fM)({label:"Notes",renderControl:()=>(0,s.jsx)(h.Z,{multiline:!0,minRows:5,fullWidth:!0,value:w,onChange:e=>M(e.target.value)})}),(0,m.fM)({label:"Status",renderControl:()=>{if(k){let e=T.find(e=>e._id===k);return(0,s.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,s.jsxs)("div",{className:"candidate-status-choices",children:[(0,s.jsx)("div",{className:"circle",style:{backgroundColor:e.color}}),e.name]}),(0,s.jsx)("div",{style:{marginLeft:"10px",cursor:"pointer",backgroundColor:"#dfdfdf",padding:"4px 8px",paddingBottom:"0px",borderRadius:"15px"},onClick:()=>{P(null)},children:(0,s.jsx)(p.Z,{})})]})}return(0,s.jsxs)(s.Fragment,{children:[T.map(e=>(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"candidate-status-choices",onClick:()=>P(e._id),children:[(0,s.jsx)("div",{className:"circle",style:{backgroundColor:e.color}}),(0,s.jsx)("span",{children:e.name})]},e._id),(0,s.jsx)("br",{})]})),0===T.length&&(0,s.jsx)(o.Z,{sx:{textAlign:"center"},children:(0,s.jsxs)("p",{children:["No statuses. Please create a status in ",(0,s.jsx)(a.Z,{target:"_blank",href:"/settings/candidate-status",children:"Settings"})]})})]})}})]})]}):null,b&&b.name?(0,s.jsx)(x.Z,{style:{backgroundColor:b.color,color:"white"},label:b.name,sx:Y,onClick:F}):(0,s.jsx)(x.Z,{label:"Change status",sx:Y,onClick:F})]})}},56344:function(e,t,n){n.d(t,{Fv:function(){return o},JU:function(){return i},bq:function(){return d}});var s=n(85893),r=n(67294),a=n(28627),l=n(82414);let i=e=>({backgroundColor:e.isDraggingOver?"#ffffff":"inherit"}),o=(e,t)=>(0,s.jsx)(a.bK,{droppableId:e,children:(e,n)=>(0,s.jsxs)("div",{ref:e.innerRef,...e.droppableProps,children:[t(n),e.placeholder]})}),d=(e,t)=>{let n=e.destination,{draggableId:s}=e;if(n){let{droppableId:e}=n;if("droppable-editor"===e&&t&&t.current){let e=t.current.getEditor(),n=e.getSelection(),r=e.getLength();n&&(r=e.getSelection().index),e.insertText(r,s)}}};t.ZP=()=>{let[e,t]=(0,r.useState)([]);(0,r.useEffect)(()=>{(0,l.Gy)({path:"/candidates/statuses/tags",method:"GET"}).then(e=>{t(e.tags)})},[]);let n=()=>(0,s.jsx)(s.Fragment,{children:e.map((e,t)=>(0,s.jsx)(a._l,{draggableId:e.value,index:t,children:t=>(0,s.jsx)("div",{ref:t.innerRef,...t.draggableProps,...t.dragHandleProps,children:(0,s.jsx)("div",{style:{backgroundColor:"#f8f8f8",padding:"5px",borderBottom:"1px solid #e0e0e0",cursor:"grab"},children:e.text})})}))});return(0,s.jsx)(s.Fragment,{children:o("initial",()=>(0,s.jsx)(s.Fragment,{children:n()}))})}},26802:function(e,t,n){var s=n(85893),r=n(67294),a=n(61903),l=n(82414),i=n(20247),o=n(98456),d=n(57144),c=n(69708);let u={current:null},h=e=>(0,l.Gy)({path:"/jobs/get-list?search=".concat(e),method:"get"});t.Z=function(e){let{onSelect:t,disabled:n=!1,label:l="Job search ...",defaultValue:x,textFieldStyle:j,inputPropStyle:p}=e,[m,g]=r.useState(!1),[f,Z]=r.useState(x),[b,v]=r.useState(""),[S,C]=r.useState([]),y=r.useMemo(()=>(0,d.Z)((e,t)=>{g(!0),u.current.getJobsApiMethod(e.input).then(e=>{g(!1),t(e.list)}).catch(e=>{(0,c.Z)(e.message),g(!1),t([])})},400),[]),k=e=>{let t=[];f&&(t=[f]),e&&(t=[...t,...e]),C(t)};return r.useEffect(()=>{let e=!0;if(u.current||(u.current={getJobsApiMethod:h}),""===b){C(f?[f]:[]);return}return y({input:b},t=>{e&&k(t)}),()=>{e=!1}},[f,b,y]),(0,s.jsx)(i.Z,{isOptionEqualToValue:(e,t)=>e.title===t.title,getOptionLabel:e=>e.title,options:S,autoComplete:!0,disabled:n,includeInputInList:!0,filterSelectedOptions:!0,value:f,noOptionsText:"Type a job title ...",onChange:(e,n)=>{C(n?[n,...S]:S),Z(n),t(n)},onInputChange:(e,t)=>{v(t)},renderInput:e=>(0,s.jsx)(a.Z,{id:"job-auto-complete",sx:j,...e,label:l,InputLabelProps:{style:{top:"-10px"}},InputProps:{...e.InputProps,endAdornment:(0,s.jsxs)(r.Fragment,{children:[m?(0,s.jsx)(o.Z,{color:"inherit",size:20}):null,e.InputProps.endAdornment]}),style:p}})})}},77419:function(e,t,n){var s=n(85893),r=n(67294),a=n(11163),l=n(61903),i=n(87109),o=n(42761),d=n(63343);t.Z=e=>{let{onChange:t}=e,n=(0,a.useRouter)(),{search:c}=n.query,[u,h]=(0,r.useState)(c),[x,j]=(0,r.useState)(c?"flex":"none");return(0,s.jsx)(l.Z,{size:"small",variant:"outlined",onChange:e=>{h(e.target.value)},value:u,onKeyDown:e=>{if("Enter"===e.key){let s=e.target.value;j(""===s?"none":"flex"),t?t(s):n.push("?search=".concat(s))}},style:{width:"350px",marginRight:"5px"},placeholder:"Search ...",InputProps:{startAdornment:(0,s.jsx)(i.Z,{position:"start",children:(0,s.jsx)(o.Z,{})}),endAdornment:(0,s.jsx)(i.Z,{position:"end",style:{display:x},children:(0,s.jsx)(d.Z,{onClick:()=>{h(""),j("none"),n.push("?search=")},sx:{cursor:"pointer"}})})}})}},5921:function(e,t,n){var s=n(67294),r=n(11163),a=n(82414);t.Z=e=>{let{endpoint:t,page:n,extraParams:l,useEffectParams:i}=e,o=(0,r.useRouter)(),d=n||o.query.page||1,[c,u]=(0,s.useState)(!1),[h,x]=(0,s.useState)([]),[j,p]=(0,s.useState)(0),m=async()=>{(0,a.Gy)({path:"/".concat(t,"?page=").concat(d).concat(l),method:"GET"}).then(e=>{u(!1),e.error||(p(e.totalCount),x(e.list))})};return(0,s.useEffect)(()=>{o.isReady&&(u(!0),m())},[d,o.isReady,...i||[]]),{page:d,fetchList:m,isLoading:c,list:h,totalCount:j,setList:x,setTotalCount:p}}}}]);
//# sourceMappingURL=2387-e8cbb08f615f00e7.js.map