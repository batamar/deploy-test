(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1283],{16399:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/ai-editor",function(){return n(3602)}])},3602:function(e,t,n){"use strict";n.r(t);var s=n(85893);n(74154);var r=n(67294),i=n(69417),a=n(50657),l=n(37645),o=n(6514),c=n(5616),d=n(86886),u=n(81458),h=n(94054),x=n(47312),p=n(18360),f=n(22224),g=n(43927),j=n(22242),m=n(71265),y=n(56073),b=n(5705),S=n(40545),w=n(44573),Z=n(85080),v=n(2376),C=n(12806),k=n(82414),M=n(97914),A=n(72454),O=n(86427);let _={"& .MuiSelect-select":{width:"200px",padding:"6px"},"& .MuiOutlinedInput-input":{width:"200px",padding:"6px"}};class E extends w.uS7{get name(){return"span"}createMarkSpec(e,t){return{...t,attrs:e.defaults(),parseDOM:[{tag:"span",getAttrs:e=>({class:e.getAttribute("class")})}],toDOM:e=>["span",{class:e.attrs.class},0]}}}let T=e=>{let{aiSuggestion:t,onChange:n}=e,{commands:r}=(0,M.rj)();return(0,s.jsx)(i.Z,{variant:"contained",color:"primary",onClick:()=>{r.insertHtml(t),n()},children:"Use Suggestion"})},I=()=>{let[e,t]=(0,r.useState)(""),[n,w]=(0,r.useState)(""),[O,I]=(0,r.useState)(!1),[N,P]=(0,r.useState)(!1),[z,B]=(0,r.useState)(""),D={class:{default:"",parseDOM:e=>e.getAttribute("class"),toDOM:e=>e.class}},F=new j.Q({extraAttributes:D}),G=new E({extraAttributes:D}),{manager:H,state:L,onChange:U}=(0,M.iF)({extensions:()=>[F,G,new m.e({}),new y.H({}),new b.f({}),new S.A({})],content:"",selection:"start",stringHandler:"html"}),[R,X]=(0,r.useState)(null);(0,r.useEffect)(()=>{H.view&&X(H.view)},[H]);let q=(0,r.useCallback)(e=>{if(e.target.className.includes("ai-")){if(!R)return;let n=R.posAtDOM(e.target,0),s=R.state.doc.nodeAt(n);if(s){let e=n+s.nodeSize,t=R.state.tr.setSelection(v.Bs.create(R.state.doc,n,e));R.dispatch(t)}t(e.target.innerText),w(e.target.className)}},[R]),Q=(0,r.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!R)return;let t=R.state;if(e){let{from:e,to:n}=t.selection,s=t.tr,r=n;t.doc.nodesBetween(e,n,(e,t)=>{if("paragraph"===e.type.name){let n={...e.attrs};delete n.class,s.setNodeMarkup(t,void 0,n),r=t+e.nodeSize}});try{s.setSelection(v.Bs.create(s.doc,r))}catch(e){console.error(e)}R.dispatch(s)}else{let e=t.tr.setSelection(v.Bs.create(t.doc,0,0));R.dispatch(e)}},[R]);(0,r.useEffect)(()=>{let e=document.querySelector(".remirror-editor");return e&&e.addEventListener("click",q),()=>{e&&e.removeEventListener("click",q)}},[R]);let V=()=>{let{from:e,to:t}=L.selection;return L.doc.textBetween(e,t," ")},W=e=>{let t=R.state,{schema:n,tr:s}=t,r=new DOMParser().parseFromString(e,"text/html").body,i=C.aw.fromSchema(n).parse(r),a=s.replaceWith(0,t.doc.content.size,i.content);R.dispatch(a)},J=e=>{I(!0),(0,k.Gy)({path:"/ai-editor/modify",method:"POST",data:{tool:e,text:V()}}).then(e=>{I(!1),B(e.text)}).catch(e=>{I(!1)})};return(0,s.jsxs)(A.f6,{children:[(()=>{if(!e)return null;let r="",c="simplify-and-clarify",d="This sentence is too long and complex. Use shorter sentences and simpler words.",u="Simplify it for me";return"ai-blue"===n?(r="Passive voice",c="more-confident",u="Make it more confident"):"ai-red"===n?r="Strengthening phrases":"ai-yellow"===n&&(r="Clarifying phrases"),"ai-blue"===n&&(d='Use active voice. "The cat was chased by the dog" becomes "The dog chased the cat."'),(0,s.jsxs)(a.Z,{open:!0,onClose:()=>{t(""),Q()},children:[(0,s.jsx)(l.Z,{children:r}),(0,s.jsxs)(o.Z,{children:[(0,s.jsx)("p",{style:{fontStyle:"italic"},children:d}),(0,s.jsx)(i.Z,{variant:"contained",color:"secondary",startIcon:(0,s.jsx)(g.Z,{}),onClick:()=>{J(c)},children:u})]})]})})(),(0,s.jsx)("br",{}),O&&(0,s.jsx)(u.Z,{}),N&&(0,s.jsx)(u.Z,{}),(0,s.jsx)(M.O1,{manager:H,autoFocus:!0,onChange:U,initialContent:L,autoRender:"end",children:(0,s.jsxs)(A.o8,{style:{padding:"20px 10px"},children:[(0,s.jsx)(A.Vn,{}),(0,s.jsx)(A.Lz,{}),(0,s.jsx)(A.ZG,{showAll:!0}),(0,s.jsxs)(h.Z,{children:[(0,s.jsx)(x.Z,{id:"ai-tools-label",sx:{top:"-10px"},children:"AI Tools"}),(0,s.jsxs)(p.Z,{sx:_,labelId:"ai-tools-label",id:"ai-tools-select",label:"AI Tools",onChange:e=>{J(e.target.value)},disabled:!V(),value:"",children:[(0,s.jsx)(f.Z,{value:"simplify-and-clarify",children:"Simplify & Clarify"}),(0,s.jsx)(f.Z,{value:"shorten-it",children:"Shorten it"}),(0,s.jsx)(f.Z,{value:"more-confident",children:"More Confident"}),(0,s.jsx)(f.Z,{value:"more-friendly",children:"More Friendly"}),(0,s.jsx)(f.Z,{value:"more-casual",children:"More Casual"})]})]}),(()=>{if(!z)return null;let e={border:"1px solid #ccc",padding:"20px",borderRadius:"5px",marginBottom:"50px",backgroundColor:"#f5f5f5"};return(0,s.jsxs)(a.Z,{open:!0,onClose:()=>B(""),children:[(0,s.jsx)(l.Z,{children:"AI Suggestion"}),(0,s.jsxs)(o.Z,{children:[(0,s.jsx)("label",{children:"Original"}),(0,s.jsx)(c.Z,{sx:e,children:(0,s.jsx)("span",{style:{backgroundColor:"rgb(252 165 165)"},children:V()})}),(0,s.jsx)("label",{children:"AI Suggestion"}),(0,s.jsx)(c.Z,{sx:e,children:(0,s.jsx)("span",{style:{backgroundColor:"rgb(167 243 208)"},children:z})}),(0,s.jsxs)(d.ZP,{container:!0,justifyContent:"space-between",children:[(0,s.jsx)(i.Z,{variant:"contained",color:"secondary",onClick:()=>{B("")},children:"Close"}),(0,s.jsx)(T,{aiSuggestion:z,onChange:()=>{B(""),t(""),Q(!0)}})]})]})]})})()]})}),(0,s.jsx)("br",{}),(0,s.jsx)(i.Z,{onClick:()=>{let e=(0,Z.Em)(L.doc);P(!0),(0,k.Gy)({path:"/ai-editor/analyze-content",method:"POST",data:{content:e}}).then(e=>{P(!1),W(e.text)}).catch(e=>{P(!1)})},variant:"contained",color:"primary",children:"Analyze content"})]})};t.default=()=>(0,s.jsx)(O.Z,{title:"AI Editor",children:(0,s.jsx)("div",{style:{width:"60%"},children:(0,s.jsx)(I,{})})})}},function(e){e.O(0,[6911,7333,2840,8360,8584,7994,6326,1956,5968,5242,3492,6427,2888,9774,179],function(){return e(e.s=16399)}),_N_E=e.O()}]);
//# sourceMappingURL=ai-editor-4ee07fd25cc143c1.js.map