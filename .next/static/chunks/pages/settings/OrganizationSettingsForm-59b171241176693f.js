(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3403],{7906:function(e,t,r){"use strict";r.d(t,{Z:function(){return j}});var n=r(1048),a=r(32793),l=r(67294),s=r(90512),i=r(58510),o=r(31618),u=r(71657),c=r(90948),d=r(1977),p=r(8027);function h(e){return(0,p.ZP)("MuiTable",e)}(0,d.Z)("MuiTable",["root","stickyHeader"]);var x=r(85893);let f=["className","component","padding","size","stickyHeader"],g=e=>{let{classes:t,stickyHeader:r}=e;return(0,i.Z)({root:["root",r&&"stickyHeader"]},h,t)},b=(0,c.ZP)("table",{name:"MuiTable",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[t.root,r.stickyHeader&&t.stickyHeader]}})(({theme:e,ownerState:t})=>(0,a.Z)({display:"table",width:"100%",borderCollapse:"collapse",borderSpacing:0,"& caption":(0,a.Z)({},e.typography.body2,{padding:e.spacing(2),color:(e.vars||e).palette.text.secondary,textAlign:"left",captionSide:"bottom"})},t.stickyHeader&&{borderCollapse:"separate"})),m="table";var j=l.forwardRef(function(e,t){let r=(0,u.Z)({props:e,name:"MuiTable"}),{className:i,component:c=m,padding:d="normal",size:p="medium",stickyHeader:h=!1}=r,j=(0,n.Z)(r,f),Z=(0,a.Z)({},r,{component:c,padding:d,size:p,stickyHeader:h}),y=g(Z),v=l.useMemo(()=>({padding:d,size:p,stickyHeader:h}),[d,p,h]);return(0,x.jsx)(o.Z.Provider,{value:v,children:(0,x.jsx)(b,(0,a.Z)({as:c,role:c===m?null:"table",ref:t,className:(0,s.Z)(y.root,i),ownerState:Z},j))})})},31618:function(e,t,r){"use strict";let n=r(67294).createContext();t.Z=n},43223:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/settings/OrganizationSettingsForm",function(){return r(2992)}])},38698:function(e,t,r){"use strict";var n=r(85893),a=r(67294),l=r(44510);t.Z=e=>{let{onClick:t}=e,[r,s]=(0,a.useState)(!1);return(0,n.jsx)(l.Z,{style:{cursor:"pointer",color:r?"#dc5e7f":"#f2a1b6"},onMouseOver:()=>s(!0),onMouseLeave:()=>s(!1),onClick:t})}},94296:function(e,t,r){"use strict";var n=r(85893),a=r(67294),l=r(82414),s=r(98456),i=r(7906),o=r(74900),u=r(38698);t.Z=e=>{let{label:t,onChange:r,multiple:c=!0,showList:d=!0,defaultFiles:p}=e,[h,x]=(0,a.useState)(!1),[f,g]=(0,a.useState)(p||[]),b=e=>{let t=f.filter(t=>t.url!==e.url);g(t),c?r(t):r(t[0])};return(0,n.jsxs)("div",{style:{position:"relative",display:"inline-block"},children:[(0,n.jsx)("input",{type:"file",id:"uploader-".concat(t),onChange:e=>{let t=e.target.files;for(let e of t){let n=new FormData;n.append("file",e),x(!0),(0,l.Ap)(n).then(n=>{x(!1),n.json().then(n=>{let{result:a}=n;f.push({url:a,date:new Date,name:e.name}),g([...f]),t.length===f.length&&(c?r(f):r(f[0]))}).catch(e=>{console.error(e.message)})}).catch(e=>{x(!1),console.error(e.message)})}},style:{display:"none"},multiple:c}),(0,n.jsxs)("label",{htmlFor:"uploader-".concat(t),style:{padding:"10px 35px",borderRadius:"5px",width:"215px !important",cursor:"pointer",background:"#ebecf0",color:"#4f4f51",border:"1px solid #dfe0e4",position:"relative"},children:[(0,n.jsx)("div",{style:{position:"absolute",height:"20px",left:"5px",top:"10px"},children:h?(0,n.jsx)(s.Z,{size:20}):(0,n.jsx)(o.Z,{})}),t]}),d?(0,n.jsxs)(n.Fragment,{children:[f.length>0?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("br",{}),(0,n.jsx)("br",{})]}):null,(0,n.jsx)(i.Z,{children:f.map(e=>(0,n.jsxs)("div",{style:{display:"flex"},children:[(0,n.jsx)(u.Z,{onClick:()=>b(e)}),(0,n.jsx)("a",{href:(0,l.pJ)(e.url),target:"__blank",children:e.name})]}))})]}):null]})}},40063:function(e,t,r){"use strict";r.d(t,{FQ:function(){return p},KY:function(){return c},fF:function(){return o},fM:function(){return i},lS:function(){return d}});var n=r(85893),a=r(86886),l=r(40476),s=r(15054);let i=e=>{let{label:t,renderControl:r,isCompact:s=!1,required:i=!1}=e;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(a.ZP,{container:!0,children:[(0,n.jsx)(a.ZP,{item:!0,flex:1,id:"label-".concat(t),children:(0,n.jsx)(l.Z,{sx:{color:"#000",fontWeight:"bold"},required:i,children:t})}),(0,n.jsx)(a.ZP,{item:!0,flex:s?6:4,children:r()})]}),(0,n.jsx)("br",{}),(0,n.jsx)("br",{})]})},o=e=>{let{router:t,totalCount:r,page:a,extraQueryParams:l={}}=e;return(0,n.jsx)(s.Z,{count:Math.ceil(r/10),page:parseInt(a,10),onChange:(e,r)=>{t.push({query:{page:r,...l}})},color:"primary",sx:{marginTop:"20px",display:"flex",justifyContent:"center"}})},u=e=>e?e.charAt(0).toUpperCase()+e.slice(1).toLowerCase():"",c=e=>{let t="inherit",r="#fff";return"active"===e.status&&(t="#4a6cbd"),"lead"===e.status&&(t="rgb(251, 249, 185)",r="#000"),["onHold","canceled","closed"].includes(e.status)&&(t="rgb(200, 105, 80)"),"filled"===e.status&&(t="rgb(221, 160, 221)"),(0,n.jsx)("span",{style:{borderRadius:"5px",backgroundColor:t,color:r,width:"90px",padding:"2px 4px"},children:u(e.status)})},d=e=>{let t="#FA8072";return e.status||(e.status="active"),"active"===e.status&&(t="#4a6cbd"),(0,n.jsx)("span",{style:{borderRadius:"5px",backgroundColor:t,color:"#fff",width:"90px",padding:"2px 4px"},children:u(e.status)})},p=(e,t)=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(a.ZP,{container:!0,children:[(0,n.jsx)(a.ZP,{item:!0,flex:3,id:"label-".concat(e),children:e}),(0,n.jsx)(a.ZP,{item:!0,flex:4,children:t})]}),(0,n.jsx)("br",{})]})},69708:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});var n=r(61889);function a(e){(0,n.l)({message:e.message||e.toString()})}},2992:function(e,t,r){"use strict";r.r(t);var n=r(85893),a=r(67294),l=r(21804),s=r.n(l),i=r(11163),o=r(82414),u=r(81458),c=r(61903),d=r(15861),p=r(5616),h=r(69661),x=r(69417),f=r(69708),g=r(40063),b=r(94296);let m=(0,o.zH)().replace("https://","").replace("http://","").replace("www.","");t.default=e=>{let{requireSubdomain:t=!1}=e,r=(0,i.useRouter)(),[l,j]=(0,a.useState)(!0),[Z,y]=(0,a.useState)(!1),[v,w]=(0,a.useState)(null),[S,C]=(0,a.useState)(null),[k,F]=(0,a.useState)(!0),_=async()=>{try{let e=await (0,o.Gy)({path:"/organization",method:"GET"});w(e),C(e.subdomain),j(!1)}catch(e){j(!1)}},M=async e=>{try{let t=await (0,o.Gy)({path:"/organization/check-subdomain",method:"POST",data:{subdomain:e}});F(t)}catch(e){console.error(e)}};(0,a.useEffect)(()=>{_()},[]);let P=(e,t)=>{w({...v,[e]:t})},T=e=>{let t=e.target.value;w({...v,name:t})},N=e=>{let t=e.target.value;if(!S){let e=s()(t);C(e),C(e),M(e)}},z=e=>{let t=e.target.value;C(t),M(t)},H=async()=>{if(!k){(0,f.Z)("Subdomain is not available");return}if(!v.name){(0,f.Z)("Name is required");return}if(t&&!S){(0,f.Z)("Subdomain is required");return}try{y(!0),await (0,o.Gy)({path:"/organization",method:"POST",data:{name:v.name,website:v.website,subdomain:k?S:null,logo:v.logo}}),y(!1),S?((0,f.Z)("You will be logged out and redirected to the new subdomain."),setTimeout(()=>{r.push("/auth/logout?subdomain=".concat(S))},3e3)):(0,f.Z)("Organization updated successfully")}catch(e){y(!1),(0,f.Z)(e.message)}};return l||!v?(0,n.jsx)(u.Z,{}):(0,n.jsxs)(n.Fragment,{children:[(0,g.fM)({label:"Name",required:!0,renderControl:()=>(0,n.jsx)(c.Z,{fullWidth:!0,value:v.name,onChange:T,onBlur:N})}),(0,g.fM)({label:"Subdomain",required:t,renderControl:()=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(c.Z,{fullWidth:!0,onChange:z,value:S}),(0,n.jsx)(d.Z,{variant:"caption",children:"https://".concat(S||"").concat(S?".":"").concat(m)}),(0,n.jsx)(p.Z,{children:!k&&(0,n.jsx)(d.Z,{variant:"caption",color:"red",children:"Subdomain is not available"})})]})}),(0,g.fM)({label:"Website",renderControl:()=>(0,n.jsx)(c.Z,{fullWidth:!0,onChange:e=>P("website",e.target.value),value:null==v?void 0:v.website})}),(0,g.fM)({label:"Logo",renderControl:()=>{let e=v.logo;return(0,n.jsxs)(n.Fragment,{children:[e&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(h.Z,{src:(0,o.pJ)(e),alt:"Logo"}),(0,n.jsx)("br",{}),(0,n.jsx)("br",{})]}),(0,n.jsx)(b.Z,{label:"Upload",multiple:!1,defaultFiles:e?[{name:e,url:e}]:[],onChange:e=>{e?w({...v,logo:e.url}):w({...v,logo:null})}})]})}}),(0,n.jsx)(x.Z,{style:{float:"right",marginTop:"-20px"},color:"primary",variant:"contained",onClick:H,disabled:l||!k||Z,children:Z?"Saving...":"Save"})]})}}},function(e){e.O(0,[2840,8360,8584,7994,7231,1956,9729,2888,9774,179],function(){return e(e.s=43223)}),_N_E=e.O()}]);
//# sourceMappingURL=OrganizationSettingsForm-59b171241176693f.js.map