(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8913],{96441:function(e,t,l){(window.__NEXT_P=window.__NEXT_P||[]).push(["/pclients",function(){return l(26395)}])},38698:function(e,t,l){"use strict";var s=l(85893),n=l(67294),r=l(44510);t.Z=e=>{let{onClick:t}=e,[l,a]=(0,n.useState)(!1);return(0,s.jsx)(r.Z,{style:{cursor:"pointer",color:l?"#dc5e7f":"#f2a1b6"},onMouseOver:()=>a(!0),onMouseLeave:()=>a(!1),onClick:t})}},87478:function(e,t,l){"use strict";var s=l(75766),n=l(85893),r=l(67294),a=l(5152),i=l.n(a);l(8645);let d=i()(async()=>{let{default:e}=await Promise.all([l.e(2937),l.e(939),l.e(7127)]).then(l.t.bind(l,71167,23)),t=e.Quill,a=t.import("blots/block/embed");class i extends a{static create(e){return super.create(e)}}return(0,s._)(i,"blotName","divider"),(0,s._)(i,"tagName","hr"),t.register({"formats/hr":i}),t=>{let{...l}=t,s=(0,r.useRef)(null),{renderExtraContent:a}=l;return l.modules={toolbar:[[{header:[1,2,!1]}],["bold","italic","underline","strike"],["blockquote","code-block"],[{list:"ordered"},{list:"bullet"}],["link","image"],["clean"]]},l.formats=["header","bold","italic","underline","strike","blockquote","code-block","list","bullet","link","image","hr","divider"],(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(e,{ref:s,...l}),a&&a(s)]})}},{loadableGenerated:{webpack:()=>[71167]},ssr:!1});t.Z=d},94296:function(e,t,l){"use strict";var s=l(85893),n=l(67294),r=l(82414),a=l(98456),i=l(7906),d=l(74900),c=l(38698);t.Z=e=>{let{label:t,onChange:l,multiple:o=!0,showList:u=!0,defaultFiles:h}=e,[x,f]=(0,n.useState)(!1),[j,p]=(0,n.useState)(h||[]),b=e=>{let t=j.filter(t=>t.url!==e.url);p(t),o?l(t):l(t[0])};return(0,s.jsxs)("div",{style:{position:"relative",display:"inline-block"},children:[(0,s.jsx)("input",{type:"file",id:"uploader-".concat(t),onChange:e=>{let t=e.target.files;for(let e of t){let s=new FormData;s.append("file",e),f(!0),(0,r.Ap)(s).then(s=>{f(!1),s.json().then(s=>{let{result:n}=s;j.push({url:n,date:new Date,name:e.name}),p([...j]),t.length===j.length&&(o?l(j):l(j[0]))}).catch(e=>{console.error(e.message)})}).catch(e=>{f(!1),console.error(e.message)})}},style:{display:"none"},multiple:o}),(0,s.jsxs)("label",{htmlFor:"uploader-".concat(t),style:{padding:"10px 35px",borderRadius:"5px",width:"215px !important",cursor:"pointer",background:"#ebecf0",color:"#4f4f51",border:"1px solid #dfe0e4",position:"relative"},children:[(0,s.jsx)("div",{style:{position:"absolute",height:"20px",left:"5px",top:"10px"},children:x?(0,s.jsx)(a.Z,{size:20}):(0,s.jsx)(d.Z,{})}),t]}),u?(0,s.jsxs)(s.Fragment,{children:[j.length>0?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("br",{}),(0,s.jsx)("br",{})]}):null,(0,s.jsx)(i.Z,{children:j.map(e=>(0,s.jsxs)("div",{style:{display:"flex"},children:[(0,s.jsx)(c.Z,{onClick:()=>b(e)}),(0,s.jsx)("a",{href:(0,r.pJ)(e.url),target:"__blank",children:e.name})]}))})]}):null]})}},40063:function(e,t,l){"use strict";l.d(t,{FQ:function(){return h},KY:function(){return o},fF:function(){return d},fM:function(){return i},lS:function(){return u}});var s=l(85893),n=l(86886),r=l(40476),a=l(15054);let i=e=>{let{label:t,renderControl:l,isCompact:a=!1,required:i=!1}=e;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(n.ZP,{container:!0,children:[(0,s.jsx)(n.ZP,{item:!0,flex:1,id:"label-".concat(t),children:(0,s.jsx)(r.Z,{sx:{color:"#000",fontWeight:"bold"},required:i,children:t})}),(0,s.jsx)(n.ZP,{item:!0,flex:a?6:4,children:l()})]}),(0,s.jsx)("br",{}),(0,s.jsx)("br",{})]})},d=e=>{let{router:t,totalCount:l,page:n,extraQueryParams:r={}}=e;return(0,s.jsx)(a.Z,{count:Math.ceil(l/10),page:parseInt(n,10),onChange:(e,l)=>{t.push({query:{page:l,...r}})},color:"primary",sx:{marginTop:"20px",display:"flex",justifyContent:"center"}})},c=e=>e?e.charAt(0).toUpperCase()+e.slice(1).toLowerCase():"",o=e=>{let t="inherit",l="#fff";return"active"===e.status&&(t="#4a6cbd"),"lead"===e.status&&(t="rgb(251, 249, 185)",l="#000"),["onHold","canceled","closed"].includes(e.status)&&(t="rgb(200, 105, 80)"),"filled"===e.status&&(t="rgb(221, 160, 221)"),(0,s.jsx)("span",{style:{borderRadius:"5px",backgroundColor:t,color:l,width:"90px",padding:"2px 4px"},children:c(e.status)})},u=e=>{let t="#FA8072";return e.status||(e.status="active"),"active"===e.status&&(t="#4a6cbd"),(0,s.jsx)("span",{style:{borderRadius:"5px",backgroundColor:t,color:"#fff",width:"90px",padding:"2px 4px"},children:c(e.status)})},h=(e,t)=>(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(n.ZP,{container:!0,children:[(0,s.jsx)(n.ZP,{item:!0,flex:3,id:"label-".concat(e),children:e}),(0,s.jsx)(n.ZP,{item:!0,flex:4,children:t})]}),(0,s.jsx)("br",{})]})},5921:function(e,t,l){"use strict";var s=l(67294),n=l(11163),r=l(82414);t.Z=e=>{let{endpoint:t,page:l,extraParams:a,useEffectParams:i}=e,d=(0,n.useRouter)(),c=l||d.query.page||1,[o,u]=(0,s.useState)(!1),[h,x]=(0,s.useState)([]),[f,j]=(0,s.useState)(0),p=async()=>{(0,r.Gy)({path:"/".concat(t,"?page=").concat(c).concat(a),method:"GET"}).then(e=>{u(!1),e.error||(j(e.totalCount),x(e.list))})};return(0,s.useEffect)(()=>{d.isReady&&(u(!0),p())},[c,d.isReady,...i||[]]),{page:c,fetchList:p,isLoading:o,list:h,totalCount:f,setList:x,setTotalCount:j}}},57194:function(e,t,l){"use strict";l.d(t,{Z:function(){return n}});var s=l(73463);function n(e){let{title:t,message:l,onAnswer:n}=e;(0,s.y)({title:t,message:l,onAnswer:n})}},69708:function(e,t,l){"use strict";l.d(t,{Z:function(){return n}});var s=l(61889);function n(e){(0,s.l)({message:e.message||e.toString()})}},26395:function(e,t,l){"use strict";l.r(t),l.d(t,{default:function(){return z}});var s=l(85893),n=l(67294),r=l(11163),a=l(86427),i=l(69417),d=l(72882),c=l(90629),o=l(7906),u=l(53184),h=l(53816),x=l(53252),f=l(295),j=l(50657),p=l(37645),b=l(5616),Z=l(93946),g=l(6514),m=l(61903),y=l(86886),v=l(40476),C=l(18360),S=l(22224),k=l(94054),w=l(50594),_=l(69708),P=l(82414),F=l(87478),W=l(94296),A=l(40063),E=e=>{let{open:t,onClose:l,onSuccess:r,client:a}=e,d=a||{},[c,o]=(0,n.useState)(d.name),[u,h]=(0,n.useState)(d.logo),[x,f]=(0,n.useState)(d.status),[E,M]=(0,n.useState)(d.notes),[N,q]=(0,n.useState)(d.address||{}),[R,z]=(0,n.useState)(d.websiteUrl),[G,O]=(0,n.useState)(d.companyEmailAddress),[T,U]=(0,n.useState)(d.attachments||[]),[V,I]=(0,n.useState)(!1),L=async()=>{if(!c){(0,_.Z)("Please fill the required fields");return}I(!0);try{await (0,P.Gy)({path:"/clients/manage",method:"POST",data:{_id:d._id,name:c,logo:u,status:x,notes:E,address:N,websiteUrl:R,companyEmailAddress:G,attachments:T}}),r(),I(!1)}catch(e){(0,_.Z)(e),I(!1)}};return(0,s.jsxs)(j.Z,{onClose:l,"aria-labelledby":"modal-title",open:t,fullScreen:!0,style:{width:"50%",left:"inherit"},children:[(0,s.jsx)(p.Z,{id:"modal-title",children:(0,s.jsxs)(b.Z,{display:"flex",alignItems:"center",children:[(0,s.jsx)(b.Z,{flexGrow:1,children:d.name?"Edit client":"Add client"}),(0,s.jsxs)(b.Z,{children:[(0,s.jsx)(Z.Z,{onClick:l,children:(0,s.jsx)(w.Z,{})}),(0,s.jsx)(i.Z,{variant:"contained",color:"success",onClick:L,disabled:V,children:"Save"})]})]})}),(0,s.jsxs)(g.Z,{style:{backgroundColor:"#f8f8f8"},children:[(0,s.jsx)("br",{}),(0,A.fM)({label:"Name",required:!0,renderControl:()=>(0,s.jsx)(m.Z,{defaultValue:c,onChange:e=>o(e.target.value),fullWidth:!0})}),(0,s.jsx)("br",{}),(0,A.fM)({label:"Logo",renderControl:()=>(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(W.Z,{label:"Upload",multiple:!1,defaultFiles:u?[{name:u,url:u}]:[],onChange:e=>{e?h(e.url):h("")}})})}),(0,s.jsxs)(y.ZP,{container:!0,children:[(0,s.jsx)(y.ZP,{item:!0,flex:1,children:(0,s.jsx)(v.Z,{sx:{color:"#000",fontWeight:"bold"},children:"Address"})}),(0,s.jsxs)(y.ZP,{item:!0,flex:4,children:[(0,s.jsx)(m.Z,{fullWidth:!0,multiline:!0,rows:2,label:"Street",defaultValue:N.street,onChange:e=>{N.street=e.target.value,q(N)}})," ",(0,s.jsx)("br",{}),(0,s.jsx)("br",{}),(0,s.jsx)(m.Z,{fullWidth:!0,label:"City",defaultValue:N.city,onChange:e=>{N.city=e.target.value,q(N)}})," ",(0,s.jsx)("br",{}),(0,s.jsx)("br",{}),(0,s.jsx)(m.Z,{fullWidth:!0,label:"State",defaultValue:N.state,onChange:e=>{N.state=e.target.value,q(N)}})," ",(0,s.jsx)("br",{}),(0,s.jsx)("br",{}),(0,s.jsx)(m.Z,{fullWidth:!0,label:"Zip Code",defaultValue:N.zipcode,onChange:e=>{N.zipcode=e.target.value,q(N)}})," ",(0,s.jsx)("br",{}),(0,s.jsx)("br",{})]})]}),(0,A.fM)({label:"Website",renderControl:()=>(0,s.jsx)(m.Z,{fullWidth:!0,value:R,onChange:e=>{z(e.target.value)}})}),(0,A.fM)({label:"Company email address",renderControl:()=>(0,s.jsx)(m.Z,{fullWidth:!0,value:G,onChange:e=>{O(e.target.value)}})}),(0,A.fM)({label:"Status",renderControl:()=>(0,s.jsxs)(C.Z,{labelId:"label-Status",value:d.status,onChange:e=>f(e.target.value),fullWidth:!0,children:[(0,s.jsx)(S.Z,{value:"active",children:"Active"}),(0,s.jsx)(S.Z,{value:"onHold",children:"InActive/On Hold"})]})}),(0,s.jsxs)(k.Z,{fullWidth:!0,children:[(0,s.jsx)("h3",{children:"Notes"}),(0,s.jsx)(F.Z,{style:{height:"300px"},value:E,onChange:e=>M(e)})]}),(0,s.jsx)("br",{}),(0,s.jsx)("br",{}),(0,s.jsx)("br",{}),(0,s.jsx)("br",{}),(0,s.jsx)("br",{}),(0,A.fM)({label:"Attachments",renderControl:()=>(0,s.jsx)(W.Z,{label:"Upload files",defaultFiles:T,multiple:!0,onChange:e=>{U(e)}})})]})]})},M=l(57194),N=l(5921),q=l(41664),R=l.n(q),z=()=>{let e=(0,r.useRouter)(),t=e.query.search||"",{page:l,fetchList:j,isLoading:p,totalCount:b,list:Z}=(0,N.Z)({endpoint:"clients",extraParams:"&source=list&search=".concat(t)}),[g,m]=(0,n.useState)(),[y,v]=(0,n.useState)(!1),C=async e=>{try{await (0,P.Gy)({path:"/clients/manage",method:"POST",data:{action:"delete",_id:e}}),(0,_.Z)("Client deleted successfully"),j()}catch(e){(0,_.Z)(e)}};return(0,s.jsxs)(a.Z,{title:"Clients",isLoading:p,children:[(0,s.jsx)("div",{style:{float:"right"},children:(0,s.jsx)(i.Z,{onClick:()=>{m(null),v(!0)},variant:"contained",children:"+ Client"})}),y?(0,s.jsx)(E,{open:y,client:g,onClose:()=>v(!1),onSuccess:()=>{v(!1),j()}}):null,(0,s.jsx)("div",{style:{clear:"both",marginBottom:"10px"}}),(0,s.jsx)(d.Z,{component:c.Z,children:(0,s.jsxs)(o.Z,{sx:{minWidth:650},size:"small",children:[(0,s.jsx)(u.Z,{children:(0,s.jsxs)(h.Z,{children:[(0,s.jsx)(x.Z,{children:"#"}),(0,s.jsx)(x.Z,{children:"Name"}),(0,s.jsx)(x.Z,{children:"Website"}),(0,s.jsx)(x.Z,{children:"Address"}),(0,s.jsx)(x.Z,{children:"Status"}),(0,s.jsx)(x.Z,{})]})}),(0,s.jsx)(f.Z,{children:Z.map((e,t)=>(0,s.jsxs)(h.Z,{children:[(0,s.jsx)(x.Z,{width:5,children:t+1}),(0,s.jsx)(x.Z,{children:(0,s.jsx)(R(),{href:"/client?id=".concat(e._id),style:{display:"flex"},children:e.name})}),(0,s.jsx)(x.Z,{children:e.websiteUrl}),(0,s.jsx)(x.Z,{children:e.address?(0,s.jsxs)("span",{children:[e.address.state,", ",e.address.city]}):null}),(0,s.jsx)(x.Z,{children:(0,A.lS)(e)}),(0,s.jsxs)(x.Z,{align:"right",children:[(0,s.jsx)(i.Z,{variant:"contained",size:"small",color:"inherit",onClick:()=>{m(e),v(!0)},children:"Edit"})," ",(0,s.jsx)(i.Z,{variant:"contained",size:"small",color:"error",onClick:()=>{(0,M.Z)({title:"Confirmation",message:"Are you sure to delete ?",onAnswer:t=>{t&&C(e._id)}})},children:"Delete"})]})]},e._id))})]})}),(0,A.fF)({router:e,totalCount:b,page:l})]})}}},function(e){e.O(0,[2840,8360,8584,7994,6326,7231,1956,5968,8118,8762,3672,6427,2888,9774,179],function(){return e(e.s=96441)}),_N_E=e.O()}]);
//# sourceMappingURL=pclients-d3977ebd453842eb.js.map