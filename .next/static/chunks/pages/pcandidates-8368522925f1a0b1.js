(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4687],{81209:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/pcandidates",function(){return a(84690)}])},84690:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return en}});var l=a(85893),n=a(41664),s=a.n(n),i=a(30381),r=a.n(i),d=a(67294),c=a(11163),o=a(86427),h=a(69417),u=a(72882),x=a(90629),j=a(7906),Z=a(53184),m=a(53816),f=a(53252),b=a(295),p=a(96070),g=a(98456),C=a(15861),S=a(61903),y=a(86886),v=a(40476),_=a(94054),P=a(50657),w=a(37645),N=a(5616),k=a(93946),I=a(6514),E=a(50594),W=a(69708),U=a(82414),F=a(87478),M=a(94296),T=a(67506),V=a(48530),A=a(40063),G=e=>{let{open:t,onClose:a,onSuccess:n,candiate:s}=e,i=s||{},[r,c]=(0,d.useState)(i.firstName),[o,u]=(0,d.useState)(i.lastName),[x,j]=(0,d.useState)(i.emails),[Z,m]=(0,d.useState)(i.notes),[f,b]=(0,d.useState)(i.phones),[p,G]=(0,d.useState)(i.currentCompany),[R,q]=(0,d.useState)(i.linkedinUrl),[O,L]=(0,d.useState)(i.githubUrl),[D,Y]=(0,d.useState)(i.googleScholarUrl),[z,B]=(0,d.useState)(i.websiteUrl),[J,X]=(0,d.useState)(i.state),[H,Q]=(0,d.useState)(i.city),[K,$]=(0,d.useState)(i.resumes),[ee,et]=(0,d.useState)(i.attachments||[]),[ea,el]=(0,d.useState)(!1),[en,es]=(0,d.useState)(!1),ei=async()=>{if(!r||!o){(0,W.Z)("Please fill the required fields");return}el(!0);try{await (0,U.Gy)({path:"/candidates/manage",method:"POST",data:{_id:i._id,firstName:r,lastName:o,emails:x,phones:f,currentCompany:p,linkedinUrl:R,githubUrl:O,googleScholarUrl:D,websiteUrl:z,state:J,city:H,notes:Z,resumes:K,attachments:ee}}),n(),el(!1)}catch(e){(0,W.Z)(e)}},er=async e=>{es(!0);try{let t=await (0,U.Gy)({path:"/candidates/parse-cv",method:"POST",data:{url:e}});for(let e of[{name:"firstName",func:c},{name:"lastName",func:u},{name:"emails",func:j},{name:"phones",func:b},{name:"linkedinUrl",func:q},{name:"githubUrl",func:L},{name:"googleScholarUrl",func:Y},{name:"websiteUrl",func:B}]){let a=t[e.name];a&&e.func(a)}es(!1)}catch(e){(0,W.Z)(e)}};return(0,l.jsxs)(P.Z,{onClose:a,"aria-labelledby":"modal-title",open:t,fullScreen:!0,style:{width:"50%",left:"inherit"},children:[(0,l.jsx)(w.Z,{id:"modal-title",children:(0,l.jsxs)(N.Z,{display:"flex",alignItems:"center",children:[(0,l.jsx)(N.Z,{flexGrow:1,children:i._id?"Edit candiate":"Add candiate"}),(0,l.jsxs)(N.Z,{children:[(0,l.jsx)(k.Z,{onClick:a,children:(0,l.jsx)(E.Z,{})}),(0,l.jsx)(h.Z,{variant:"contained",color:"success",onClick:ei,disabled:ea,children:"Save"})]})]})}),(0,l.jsxs)(I.Z,{style:{backgroundColor:"#f8f8f8"},children:[(0,l.jsx)("br",{}),(0,A.fM)({label:"Resumes",renderControl:()=>(0,l.jsx)(M.Z,{label:"Upload",multiple:!0,defaultFiles:K||[],onChange:e=>{$(e),r||o||!(e.length>0)||er(e[0].url)}})}),en?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(g.Z,{}),(0,l.jsx)(C.Z,{children:"Parsing CV..."})]}):(0,l.jsxs)(l.Fragment,{children:[(0,A.fM)({label:"First Name",required:!0,renderControl:()=>(0,l.jsx)(S.Z,{defaultValue:r,onChange:e=>c(e.target.value),fullWidth:!0})}),(0,A.fM)({label:"Last Name",required:!0,renderControl:()=>(0,l.jsx)(S.Z,{defaultValue:o,onChange:e=>u(e.target.value),fullWidth:!0})}),(0,A.fM)({label:"Emails",renderControl:()=>(0,l.jsx)(T.Z,{initialEmails:x,onChange:j})}),(0,A.fM)({label:"Phones",renderControl:()=>(0,l.jsx)(V.Z,{initialPhones:f,onChange:b})}),(0,l.jsxs)(y.ZP,{container:!0,children:[(0,l.jsx)(y.ZP,{item:!0,flex:1,children:(0,l.jsx)(v.Z,{sx:{color:"#000",fontWeight:"bold"},children:"Social links"})}),(0,l.jsxs)(y.ZP,{item:!0,flex:4,children:[(0,l.jsx)(S.Z,{fullWidth:!0,label:"LinkedIn",defaultValue:R,onChange:e=>{q(e.target.value)}})," ",(0,l.jsx)("br",{}),(0,l.jsx)("br",{}),(0,l.jsx)(S.Z,{fullWidth:!0,label:"Github",defaultValue:O,onChange:e=>{L(e.target.value)}})," ",(0,l.jsx)("br",{}),(0,l.jsx)("br",{}),(0,l.jsx)(S.Z,{fullWidth:!0,label:"Google Scholar",defaultValue:D,onChange:e=>{Y(e.target.value)}})," ",(0,l.jsx)("br",{}),(0,l.jsx)("br",{}),(0,l.jsx)(S.Z,{fullWidth:!0,label:"Website",defaultValue:z,onChange:e=>{B(e.target.value)}})," ",(0,l.jsx)("br",{}),(0,l.jsx)("br",{})]})]}),(0,l.jsx)("br",{}),(0,l.jsxs)(y.ZP,{container:!0,children:[(0,l.jsx)(y.ZP,{item:!0,flex:1,children:(0,l.jsx)(v.Z,{sx:{color:"#000",fontWeight:"bold"},children:"Address"})}),(0,l.jsxs)(y.ZP,{item:!0,flex:4,children:[(0,l.jsx)(S.Z,{fullWidth:!0,label:"City",defaultValue:H,onChange:e=>{Q(e.target.value)}})," ",(0,l.jsx)("br",{}),(0,l.jsx)("br",{}),(0,l.jsx)(S.Z,{fullWidth:!0,label:"State",defaultValue:J,onChange:e=>{X(e.target.value)}})," ",(0,l.jsx)("br",{}),(0,l.jsx)("br",{})]})]}),(0,l.jsx)("br",{}),(0,A.fM)({label:"Current employer",renderControl:()=>(0,l.jsx)(S.Z,{defaultValue:p,onChange:e=>G(e.target.value),fullWidth:!0})}),(0,l.jsxs)(_.Z,{fullWidth:!0,children:[(0,l.jsx)("h3",{children:"Notes"}),(0,l.jsx)(F.Z,{style:{height:"300px"},value:Z,onChange:e=>m(e)})]}),(0,l.jsx)("br",{}),(0,l.jsx)("br",{}),(0,l.jsx)("br",{}),(0,l.jsx)("br",{}),(0,l.jsx)("br",{}),(0,A.fM)({label:"Attachments",renderControl:()=>(0,l.jsx)(M.Z,{label:"Upload files",defaultFiles:ee,onChange:e=>{et(e)}})})]})]})]})},R=a(77419),q=a(5921),O=a(57194),L=a(58070),D=a(20916),Y=a(40044),z=a(67720),B=a(8339),J=a(23693),X=a(23233),H=a(37481),Q=a(47198),K=a(66968);function $(e){let{children:t,value:a,index:n,...s}=e;return(0,l.jsx)("div",{role:"tabpanel",hidden:a!==n,id:"simple-tabpanel-".concat(n),"aria-labelledby":"simple-tab-".concat(n),...s,children:a===n&&(0,l.jsx)(N.Z,{sx:{p:3},children:t})})}function ee(e){return{id:"simple-tab-".concat(e),"aria-controls":"simple-tabpanel-".concat(e)}}var et=e=>{let{onClose:t}=e,a=(0,c.useRouter)(),{candidateId:n}=a.query,[s,i]=(0,d.useState)(!1),[r,o]=(0,d.useState)(""),[h,u]=d.useState(0),[x,j]=(0,d.useState)(),Z=()=>{if(a.isReady){let{query:e}=a;i(!0),(0,U.Gy)({path:"/candidates/detail?_id=".concat(e.candidateId),method:"GET"}).then(e=>{i(!1),e.error||j(e)})}};return((0,d.useEffect)(()=>{Z()},[n]),x)?(0,l.jsxs)(P.Z,{open:!0,fullScreen:!0,maxWidth:"lg",style:{width:"50%",left:"inherit"},onClose:t,slotProps:{backdrop:{sx:{display:"none"}}},PaperProps:{sx:{pointerEvents:"auto"}},children:[(0,l.jsxs)(w.Z,{sx:{display:"flex",alignItems:"center"},children:[x.avatarUrl?(0,l.jsx)("img",{style:{borderRadius:"50px",height:"30px",marginRight:"10px"},src:(0,U.pJ)(x.avatarUrl)}):null,(0,l.jsxs)("span",{children:[x.firstName," ",x.lastName]}),(0,l.jsx)(k.Z,{onClick:t,sx:{marginLeft:"auto"},children:(0,l.jsx)(E.Z,{})})]}),(0,l.jsxs)(I.Z,{children:[s?(0,l.jsx)(g.Z,{}):null,(0,l.jsxs)(N.Z,{sx:{width:"100%"},children:[(0,l.jsx)(N.Z,{sx:{borderBottom:1,borderColor:"divider"},children:(0,l.jsxs)(D.Z,{value:h,onChange:(e,t)=>{u(t)},"aria-label":"basic tabs example",children:[(0,l.jsx)(Y.Z,{label:"Details",...ee(0)}),(0,l.jsx)(Y.Z,{label:"Attachments",...ee(1)}),(0,l.jsx)(Y.Z,{label:"Notes",...ee(2)}),(0,l.jsx)(Y.Z,{label:"Feed",...ee(3)}),(0,l.jsx)(Y.Z,{label:"Email",...ee(4)})]})}),(0,l.jsxs)($,{value:h,index:0,children:[(0,l.jsx)(X.Z,{showAvatar:!1,candidate:x,onChange:()=>{Z()}}),(0,l.jsx)(z.Z,{}),(0,l.jsx)(J.Z,{candidate:x,onChange:()=>{o(Math.random().toString())}})]}),(0,l.jsx)($,{value:h,index:1,children:(0,l.jsx)(Q.Z,{withCombo:!0,candidate:x,onChange:()=>{Z()}})},x._id),(0,l.jsx)($,{value:h,index:2,children:(0,l.jsx)(H.Z,{showTitle:!1,candidate:x,onChange:()=>{Z()}})}),(0,l.jsx)($,{value:h,index:3,children:(0,l.jsx)(B.Z,{candidateId:n,updateHash:r})}),(0,l.jsx)($,{value:h,index:4,children:(0,l.jsx)(K.Z,{jobId:(x.jobIds||[]).length>0?x.jobIds[0]:void 0,candidateId:x._id,to:(x.emails||[]).map(e=>e.email).join(",")})})]})]})]}):null},ea=a(26802),el=e=>{let{onChange:t,onClear:a,textFieldStyle:n,inputPropStyle:s}=e,i=e=>{(0,U.Gy)({path:"/candidates/semantic-search",method:"POST",data:{_id:e}}).then(e=>{e.error||t(e.list,e.totalCount)}).catch(e=>{(0,W.Z)(e.message)})};return(0,l.jsx)(ea.Z,{textFieldStyle:n,inputPropStyle:s,label:"Job description search",onSelect:e=>{e?i(e._id):a()}})},en=()=>{let e=(0,c.useRouter)(),t=e.query,a=t.search||"",{page:n,fetchList:i,isLoading:g,totalCount:C,list:S,setList:y,setTotalCount:v}=(0,q.Z)({endpoint:"candidates/",extraParams:"&search=".concat(a),useEffectParams:[a]}),_=a=>{e.push({pathname:e.pathname,query:{...t,preview:!0,candidateId:a._id}})},[P,w]=(0,d.useState)(),[N,k]=(0,d.useState)(!1),I=async e=>{try{await (0,U.Gy)({path:"/candidates/manage",method:"POST",data:{action:"delete",_id:e}}),(0,W.Z)("Candidate deleted successfully"),i()}catch(e){(0,W.Z)(e)}};return(0,l.jsxs)(o.Z,{title:"Candidates",isLoading:g,children:[(0,l.jsx)(R.Z,{}),t.preview?(0,l.jsx)(et,{onClose:()=>{e.push({pathname:e.pathname,query:{...t,preview:null,candidateId:null}})}}):null,(0,l.jsxs)("div",{style:{float:"right",display:"flex",alignItems:"center"},children:[(0,l.jsx)(el,{textFieldStyle:{width:"500px",marginRight:"10px"},inputPropStyle:{paddingTop:"0px",paddingBottom:"0px"},onChange:(e,t)=>{y(e),v(t)},onClear:()=>{i()}}),(0,l.jsx)(h.Z,{onClick:()=>{w(null),k(!0)},variant:"contained",children:"+ Candidate"})]}),N?(0,l.jsx)(G,{open:N,candiate:P,onClose:()=>k(!1),onSuccess:()=>{k(!1),i()}}):null,(0,l.jsx)("div",{style:{clear:"both",marginBottom:"10px"}}),(0,l.jsx)(u.Z,{component:x.Z,children:(0,l.jsxs)(j.Z,{sx:{minWidth:650},size:"small",children:[(0,l.jsx)(Z.Z,{children:(0,l.jsxs)(m.Z,{children:[(0,l.jsx)(f.Z,{children:"#"}),(0,l.jsx)(f.Z,{}),(0,l.jsx)(f.Z,{children:"Name"}),(0,l.jsx)(f.Z,{children:"Location"}),(0,l.jsx)(f.Z,{children:"Updated"}),(0,l.jsx)(f.Z,{children:"Recent status-Extended"}),(0,l.jsx)(f.Z,{children:"Score"}),(0,l.jsx)(f.Z,{})]})}),(0,l.jsx)(b.Z,{children:S.map((e,t)=>(0,l.jsxs)(m.Z,{children:[(0,l.jsx)(f.Z,{children:t+1}),(0,l.jsx)(f.Z,{children:(0,l.jsx)(p.Z,{color:"action",sx:{cursor:"pointer"},onClick:()=>{_(e)}})}),(0,l.jsx)(f.Z,{children:(0,l.jsxs)(s(),{href:"/candidate?id=".concat(e._id),children:[e.firstName," ",e.lastName]})}),(0,l.jsx)(f.Z,{children:e.city&&e.state?"".concat(e.city,", ").concat(e.state):null}),(0,l.jsx)(f.Z,{children:e.updatedAt?r()(e.createdAt).format("MM/DD/YYYY"):null}),(0,l.jsx)(f.Z,{children:e.recentStatus?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(L.Z,{status:{_id:e.recentStatus.data.statusId,name:e.recentStatus.data.statusName,color:e.recentStatus.data.statusColor},candidateId:e._id,jobId:e.recentStatus.jobId,onSuccess:()=>{i()}})," - ",(0,l.jsx)(s(),{href:"job?id=".concat(e.recentStatus.jobId),target:"__blank",children:e.recentStatus.jobTitle})]}):null}),(0,l.jsx)(f.Z,{children:e.score}),(0,l.jsxs)(f.Z,{align:"right",children:[(0,l.jsx)(h.Z,{variant:"contained",size:"small",color:"inherit",onClick:()=>{w(e),k(!0)},children:"Edit"})," ",(0,l.jsx)(h.Z,{variant:"contained",size:"small",color:"error",onClick:()=>{(0,O.Z)({title:"Confirmation",message:"Are you sure to delete ?",onAnswer:t=>{t&&I(e._id)}})},children:"Delete"})]})]},e._id))})]})}),(0,A.fF)({router:e,totalCount:C,page:n,extraQueryParams:{search:a}})]})}}},function(e){e.O(0,[4885,5062,2840,8360,8584,7994,6326,7231,1956,5968,8118,8762,9704,5242,682,1664,4501,2300,6427,2889,2387,5394,2888,9774,179],function(){return e(e.s=81209)}),_N_E=e.O()}]);
//# sourceMappingURL=pcandidates-8368522925f1a0b1.js.map