"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2724],{38698:function(e,t,a){var n=a(85893),l=a(67294),r=a(44510);t.Z=e=>{let{onClick:t}=e,[a,s]=(0,l.useState)(!1);return(0,n.jsx)(r.Z,{style:{cursor:"pointer",color:a?"#dc5e7f":"#f2a1b6"},onMouseOver:()=>s(!0),onMouseLeave:()=>s(!1),onClick:t})}},94296:function(e,t,a){var n=a(85893),l=a(67294),r=a(82414),s=a(98456),i=a(7906),o=a(74900),d=a(38698);t.Z=e=>{let{label:t,onChange:a,multiple:u=!0,showList:c=!0,defaultFiles:h}=e,[x,m]=(0,l.useState)(!1),[p,f]=(0,l.useState)(h||[]),j=e=>{let t=p.filter(t=>t.url!==e.url);f(t),u?a(t):a(t[0])};return(0,n.jsxs)("div",{style:{position:"relative",display:"inline-block"},children:[(0,n.jsx)("input",{type:"file",id:"uploader-".concat(t),onChange:e=>{let t=e.target.files;for(let e of t){let n=new FormData;n.append("file",e),m(!0),(0,r.Ap)(n).then(n=>{m(!1),n.json().then(n=>{let{result:l}=n;p.push({url:l,date:new Date,name:e.name}),f([...p]),t.length===p.length&&(u?a(p):a(p[0]))}).catch(e=>{console.error(e.message)})}).catch(e=>{m(!1),console.error(e.message)})}},style:{display:"none"},multiple:u}),(0,n.jsxs)("label",{htmlFor:"uploader-".concat(t),style:{padding:"10px 35px",borderRadius:"5px",width:"215px !important",cursor:"pointer",background:"#ebecf0",color:"#4f4f51",border:"1px solid #dfe0e4",position:"relative"},children:[(0,n.jsx)("div",{style:{position:"absolute",height:"20px",left:"5px",top:"10px"},children:x?(0,n.jsx)(s.Z,{size:20}):(0,n.jsx)(o.Z,{})}),t]}),c?(0,n.jsxs)(n.Fragment,{children:[p.length>0?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("br",{}),(0,n.jsx)("br",{})]}):null,(0,n.jsx)(i.Z,{children:p.map(e=>(0,n.jsxs)("div",{style:{display:"flex"},children:[(0,n.jsx)(d.Z,{onClick:()=>j(e)}),(0,n.jsx)("a",{href:(0,r.pJ)(e.url),target:"__blank",children:e.name})]}))})]}):null]})}},40063:function(e,t,a){a.d(t,{FQ:function(){return h},KY:function(){return u},fF:function(){return o},fM:function(){return i},lS:function(){return c}});var n=a(85893),l=a(86886),r=a(40476),s=a(15054);let i=e=>{let{label:t,renderControl:a,isCompact:s=!1,required:i=!1}=e;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(l.ZP,{container:!0,children:[(0,n.jsx)(l.ZP,{item:!0,flex:1,id:"label-".concat(t),children:(0,n.jsx)(r.Z,{sx:{color:"#000",fontWeight:"bold"},required:i,children:t})}),(0,n.jsx)(l.ZP,{item:!0,flex:s?6:4,children:a()})]}),(0,n.jsx)("br",{}),(0,n.jsx)("br",{})]})},o=e=>{let{router:t,totalCount:a,page:l,extraQueryParams:r={}}=e;return(0,n.jsx)(s.Z,{count:Math.ceil(a/10),page:parseInt(l,10),onChange:(e,a)=>{t.push({query:{page:a,...r}})},color:"primary",sx:{marginTop:"20px",display:"flex",justifyContent:"center"}})},d=e=>e?e.charAt(0).toUpperCase()+e.slice(1).toLowerCase():"",u=e=>{let t="inherit",a="#fff";return"active"===e.status&&(t="#4a6cbd"),"lead"===e.status&&(t="rgb(251, 249, 185)",a="#000"),["onHold","canceled","closed"].includes(e.status)&&(t="rgb(200, 105, 80)"),"filled"===e.status&&(t="rgb(221, 160, 221)"),(0,n.jsx)("span",{style:{borderRadius:"5px",backgroundColor:t,color:a,width:"90px",padding:"2px 4px"},children:d(e.status)})},c=e=>{let t="#FA8072";return e.status||(e.status="active"),"active"===e.status&&(t="#4a6cbd"),(0,n.jsx)("span",{style:{borderRadius:"5px",backgroundColor:t,color:"#fff",width:"90px",padding:"2px 4px"},children:d(e.status)})},h=(e,t)=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(l.ZP,{container:!0,children:[(0,n.jsx)(l.ZP,{item:!0,flex:3,id:"label-".concat(e),children:e}),(0,n.jsx)(l.ZP,{item:!0,flex:4,children:t})]}),(0,n.jsx)("br",{})]})},69708:function(e,t,a){a.d(t,{Z:function(){return l}});var n=a(61889);function l(e){(0,n.l)({message:e.message||e.toString()})}},2992:function(e,t,a){a.r(t);var n=a(85893),l=a(67294),r=a(21804),s=a.n(r),i=a(11163),o=a(82414),d=a(81458),u=a(61903),c=a(15861),h=a(5616),x=a(69661),m=a(69417),p=a(69708),f=a(40063),j=a(94296);let g=(0,o.zH)().replace("https://","").replace("http://","").replace("www.","");t.default=e=>{let{requireSubdomain:t=!1}=e,a=(0,i.useRouter)(),[r,b]=(0,l.useState)(!0),[y,Z]=(0,l.useState)(!1),[v,S]=(0,l.useState)(null),[w,C]=(0,l.useState)(null),[F,P]=(0,l.useState)(!0),E=async()=>{try{let e=await (0,o.Gy)({path:"/organization",method:"GET"});S(e),C(e.subdomain),b(!1)}catch(e){b(!1)}},k=async e=>{try{let t=await (0,o.Gy)({path:"/organization/check-subdomain",method:"POST",data:{subdomain:e}});P(t)}catch(e){console.error(e)}};(0,l.useEffect)(()=>{E()},[]);let M=(e,t)=>{S({...v,[e]:t})},_=e=>{let t=e.target.value;S({...v,name:t})},G=e=>{let t=e.target.value;if(!w){let e=s()(t);C(e),C(e),k(e)}},T=e=>{let t=e.target.value;C(t),k(t)},A=async()=>{if(!F){(0,p.Z)("Subdomain is not available");return}if(!v.name){(0,p.Z)("Name is required");return}if(t&&!w){(0,p.Z)("Subdomain is required");return}try{Z(!0),await (0,o.Gy)({path:"/organization",method:"POST",data:{name:v.name,website:v.website,subdomain:F?w:null,logo:v.logo}}),Z(!1),w?((0,p.Z)("You will be logged out and redirected to the new subdomain."),setTimeout(()=>{a.push("/auth/logout?subdomain=".concat(w))},3e3)):(0,p.Z)("Organization updated successfully")}catch(e){Z(!1),(0,p.Z)(e.message)}};return r||!v?(0,n.jsx)(d.Z,{}):(0,n.jsxs)(n.Fragment,{children:[(0,f.fM)({label:"Name",required:!0,renderControl:()=>(0,n.jsx)(u.Z,{fullWidth:!0,value:v.name,onChange:_,onBlur:G})}),(0,f.fM)({label:"Subdomain",required:t,renderControl:()=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(u.Z,{fullWidth:!0,onChange:T,value:w}),(0,n.jsx)(c.Z,{variant:"caption",children:"https://".concat(w||"").concat(w?".":"").concat(g)}),(0,n.jsx)(h.Z,{children:!F&&(0,n.jsx)(c.Z,{variant:"caption",color:"red",children:"Subdomain is not available"})})]})}),(0,f.fM)({label:"Website",renderControl:()=>(0,n.jsx)(u.Z,{fullWidth:!0,onChange:e=>M("website",e.target.value),value:null==v?void 0:v.website})}),(0,f.fM)({label:"Logo",renderControl:()=>{let e=v.logo;return(0,n.jsxs)(n.Fragment,{children:[e&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(x.Z,{src:(0,o.pJ)(e),alt:"Logo"}),(0,n.jsx)("br",{}),(0,n.jsx)("br",{})]}),(0,n.jsx)(j.Z,{label:"Upload",multiple:!1,defaultFiles:e?[{name:e,url:e}]:[],onChange:e=>{e?S({...v,logo:e.url}):S({...v,logo:null})}})]})}}),(0,n.jsx)(m.Z,{style:{float:"right",marginTop:"-20px"},color:"primary",variant:"contained",onClick:A,disabled:r||!F||y,children:y?"Saving...":"Save"})]})}},13708:function(e,t,a){a.r(t);var n=a(85893),l=a(67294),r=a(69417),s=a(2859),i=a(86664),o=a(82414),d=a(69708);let u=(0,s.J)("pk_test_6ZAEJTGAGGRruZbIblrsmTMS"),c=e=>{let{afterFetch:t,onSuccess:a}=e,[s,u]=(0,l.useState)(!1),[c,h]=(0,l.useState)(!1),[x,m]=(0,l.useState)(null),p=(0,i.useStripe)(),f=(0,i.useElements)(),j=async()=>{h(!0);try{let e=await (0,o.Gy)({path:"/payment-info",method:"GET"});m(e),t&&t(e),h(!1)}catch(e){h(!1),(0,d.Z)(e)}};(0,l.useEffect)(()=>{j()},[]);let g=async e=>{if(e.preventDefault(),!p||!f)return;let{error:t,paymentMethod:n}=await p.createPaymentMethod({type:"card",card:f.getElement(i.CardElement)});if(t)(0,d.Z)(t);else try{u(!0);let e=await (0,o.Gy)({path:"/save-payment-method",method:"POST",data:{paymentMethod:n}});(0,d.Z)("Payment method saved"),m(e),a&&a(e),u(!1)}catch(e){u(!1),(0,d.Z)(e)}};return c||!x?null:(0,n.jsxs)("form",{onSubmit:g,children:[(0,n.jsx)(i.CardElement,{className:"StripeElement"}),(0,n.jsxs)(r.Z,{variant:"contained",color:"primary",type:"submit",disabled:!p||s,children:[x.paymentMethodId?"Update":"Add"," payment method"]})]})};t.default=function(e){let{onSuccess:t,afterFetch:a}=e;return(0,n.jsx)(i.Elements,{stripe:u,children:(0,n.jsx)(c,{onSuccess:t,afterFetch:a})})}},62724:function(e,t,a){a.r(t);var n=a(85893),l=a(67294),r=a(61903),s=a(5616),i=a(46901),o=a(81458),d=a(18360),u=a(22224),c=a(69417),h=a(50657),x=a(37645),m=a(93946),p=a(6514),f=a(50594),j=a(69708),g=a(82414),b=a(40063),y=a(2992),Z=a(13708);t.default=e=>{let{open:t,onClose:a,onSuccess:v,user:S}=e,w=S||{_id:null,firstName:"",lastName:"",title:"",email:"",role:"",phone:""},[C,F]=(0,l.useState)(null),[P,E]=(0,l.useState)(null),[k,M]=(0,l.useState)(!1),[_,G]=(0,l.useState)(w.firstName),[T,A]=(0,l.useState)(w.lastName),[N,q]=(0,l.useState)(w.title),[z,I]=(0,l.useState)(w.email),[R,W]=(0,l.useState)(w.phone),[O,L]=(0,l.useState)(w.role),[D,J]=(0,l.useState)(!1),[U,H]=(0,l.useState)(""),[Y,B]=(0,l.useState)(""),K=async()=>{M(!0);try{let e=await (0,g.Gy)({path:"/organization",method:"GET"});E(e),M(!1)}catch(e){M(!1)}};(0,l.useEffect)(()=>{K()},[]);let Q=async()=>{if(!z||!U||!Y){(0,j.Z)("Please fill in all required fields");return}J(!0);try{await (0,g.Gy)({path:"/users/manage",method:"POST",data:{_id:w._id,firstName:_,lastName:T,title:N,email:z,role:O,phone:R,password:U,passwordConfirm:Y}}),v(),J(!1)}catch(e){J(!1),(0,j.Z)(e)}},$=(e,t,a,l,s)=>(0,n.jsx)(n.Fragment,{children:(0,b.fM)({label:t,required:s,renderControl:()=>(0,n.jsx)(r.Z,{fullWidth:!0,value:e,onChange:e=>a(e.target.value),type:l})})});if(!P)return null;let V=D||!C||!C.paymentMethodId;return(0,n.jsxs)(h.Z,{onClose:a,"aria-labelledby":"modal-title",open:t,fullScreen:!0,style:{width:"40%",left:"inherit"},children:[(0,n.jsx)(x.Z,{id:"modal-title",children:(0,n.jsxs)(s.Z,{display:"flex",alignItems:"center",children:[(0,n.jsx)(s.Z,{flexGrow:1,children:w._id?"Edit user":"Create a new user"}),(0,n.jsxs)(s.Z,{children:[(0,n.jsx)(m.Z,{onClick:a,children:(0,n.jsx)(f.Z,{})}),P.subdomain?(0,n.jsx)(c.Z,{variant:"contained",color:"success",onClick:Q,disabled:V,children:"Save"}):null]})]})}),(0,n.jsx)(p.Z,{style:{backgroundColor:"#f8f8f8"},children:P.subdomain||w._id?(0,n.jsxs)(n.Fragment,{children:[k||D||!C?(0,n.jsx)(o.Z,{}):null,(0,n.jsx)("br",{}),C?C.paymentMethodId?(0,n.jsx)(n.Fragment,{children:w._id?null:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i.Z,{severity:"warning",children:"Adding a user will cost an additional $99 per month"}),(0,n.jsx)("br",{})]})}):(0,n.jsxs)(s.Z,{display:"flex",flexDirection:"column",alignItems:"center",children:[(0,n.jsx)(i.Z,{severity:"warning",children:"Please add your payment method to continue"}),(0,n.jsx)("br",{}),(0,n.jsx)(Z.default,{afterFetch:e=>{F(e)},onSuccess:e=>{F(e)}}),(0,n.jsx)("br",{}),(0,n.jsx)("br",{})]}):(0,n.jsx)(Z.default,{afterFetch:e=>{F(e)},onSuccess:e=>{F(e)}}),$(_,"First name",G),$(T,"Last name",A),$(N,"Title",q),$(z,"Email",I,"email",!0),$(R,"Phone",W),(0,b.fM)({label:"Role",renderControl:()=>(0,n.jsxs)(d.Z,{value:O,onChange:e=>L(e.target.value),fullWidth:!0,children:[(0,n.jsx)(u.Z,{value:"recruiter",children:"Recruiter"}),(0,n.jsx)(u.Z,{value:"admin",children:"Admin (No billing access)"}),(0,n.jsx)(u.Z,{value:"superAdmin",children:"Admin"})]})}),S&&S._id?null:(0,n.jsxs)(n.Fragment,{children:[$(U,"Password",H,"password",!0),$(Y,"Password confirm",B,"password",!0)]})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i.Z,{severity:"warning",children:"Please configure your organization name and subdomain to continue"}),(0,n.jsx)("br",{}),(0,n.jsx)(y.default,{requireSubdomain:!0})]})})]})}}}]);
//# sourceMappingURL=2724-6103eba358f638ef.js.map